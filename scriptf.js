const _0x2f24bf=_0x5e2d;(function(_0x4bbf6c,_0x4f0e5b){const _0x510368=_0x5e2d,_0x48484a=_0x4bbf6c();while(!![]){try{const _0x33a6b3=-parseInt(_0x510368(0xe3))/0x1*(-parseInt(_0x510368(0x100))/0x2)+parseInt(_0x510368(0x13a))/0x3*(parseInt(_0x510368(0x137))/0x4)+parseInt(_0x510368(0x160))/0x5+-parseInt(_0x510368(0xe1))/0x6+parseInt(_0x510368(0xa6))/0x7+parseInt(_0x510368(0xb2))/0x8*(-parseInt(_0x510368(0xc5))/0x9)+-parseInt(_0x510368(0x96))/0xa;if(_0x33a6b3===_0x4f0e5b)break;else _0x48484a['push'](_0x48484a['shift']());}catch(_0x16ce0c){_0x48484a['push'](_0x48484a['shift']());}}}(_0x2516,0xd5084));const canvas=document[_0x2f24bf(0xe2)]('gameCanvas'),ctx=canvas['getContext']('2d');let gameRunning=![],gamePaused=![],isCountingDown=![],countdownValue=0x0,pausedTime=0x0,baseGameSpeed=0x14,gameSpeed=0x14,score=0x0,frameCount=0x0,username='',lastTime=0x0,deltaTime=0x0;function getGameSpeedMultiplier(){const _0x3056aa=_0x2f24bf,_0x17f258=window[_0x3056aa(0x155)],_0xb3101=window[_0x3056aa(0x142)],_0x3aa776=_0x17f258>=0x400&&_0xb3101>=0x258;if(_0x3aa776)return 1.8;return 0x1;}function updateGameSpeed(){const _0x5ad9cc=getGameSpeedMultiplier();baseGameSpeed=0x12c*_0x5ad9cc,gameSpeed=baseGameSpeed,updatePhysicsConstants();}function updatePhysicsConstants(){const _0x5c9136=_0x2f24bf,_0x30a1bc=gameSpeed/0x12c;let _0x276b79=BASE_GRAVITY*_0x30a1bc*GRAVITY_SPEED_MULTIPLIER;const _0x1d3022=BASE_GRAVITY*0.9,_0x477fcb=BASE_GRAVITY*2.5;GRAVITY=Math[_0x5c9136(0xc6)](_0x1d3022,Math[_0x5c9136(0xa3)](_0x477fcb,_0x276b79));const _0x582182=Math[_0x5c9136(0xb6)](GRAVITY/BASE_GRAVITY),_0x377316=Math[_0x5c9136(0xc6)](0.9,Math[_0x5c9136(0xa3)](1.6,_0x582182));JUMP_FORCE=BASE_JUMP_FORCE*_0x377316;}const assets={'character':new Image(),'background':new Image(),'obstacle':new Image()};assets[_0x2f24bf(0x11d)][_0x2f24bf(0x173)]=_0x2f24bf(0xe0),assets[_0x2f24bf(0x108)][_0x2f24bf(0x173)]=_0x2f24bf(0x140),assets[_0x2f24bf(0xd4)][_0x2f24bf(0x173)]='assets/obstacle_doll.png';const musicTracks=[_0x2f24bf(0x12f),_0x2f24bf(0x111),_0x2f24bf(0x162),'assets/music4.mp3',_0x2f24bf(0x14c),_0x2f24bf(0x16e),'assets/music7.mp3',_0x2f24bf(0xb8),_0x2f24bf(0xae),'assets/music10.mp3','assets/music11.mp3',_0x2f24bf(0x135),'assets/music13.mp3',_0x2f24bf(0xe5),_0x2f24bf(0xc0),'assets/music16.mp3',_0x2f24bf(0x172)],menuTheme=_0x2f24bf(0x13b),BASE_GRAVITY=0x4b0,BASE_JUMP_FORCE=-0x2bc,GROUND_HEIGHT=0x32,GRAVITY_SPEED_MULTIPLIER=1.2;let GRAVITY=BASE_GRAVITY,JUMP_FORCE=BASE_JUMP_FORCE;const dino={'x':0x0,'y':0x0,'width':0x78,'height':0xc8,'dy':0x0,'jumpTimer':0x0,'grounded':![],'draw'(){const _0x10129c=_0x2f24bf;assets[_0x10129c(0x11d)][_0x10129c(0x171)]&&assets['character'][_0x10129c(0x15d)]!==0x0?ctx[_0x10129c(0x15a)](assets[_0x10129c(0x11d)],this['x'],this['y'],this[_0x10129c(0x149)],this[_0x10129c(0x153)]):(ctx[_0x10129c(0x14e)]=_0x10129c(0xd3),ctx[_0x10129c(0x12d)](this['x'],this['y'],this['width'],this[_0x10129c(0x153)]));},'update'(_0x2c5a2d){const _0x1e20a3=_0x2f24bf;(keys[_0x1e20a3(0x165)]||keys[_0x1e20a3(0xc1)]||keys[_0x1e20a3(0xd8)])&&this[_0x1e20a3(0x112)](),this['y']+=this['dy']*_0x2c5a2d,this['y']+this['height']>canvas[_0x1e20a3(0x153)]-GROUND_HEIGHT?(this['y']=canvas[_0x1e20a3(0x153)]-GROUND_HEIGHT-this['height'],this['dy']=0x0,this[_0x1e20a3(0xce)]=!![]):(this['dy']+=GRAVITY*_0x2c5a2d,this['grounded']=![]);},'jump'(){const _0x52adc6=_0x2f24bf;this[_0x52adc6(0xce)]&&(this['dy']=JUMP_FORCE,this[_0x52adc6(0xce)]=![]);}};let obstacles=[],bgOffset=0x0;const keys={};window[_0x2f24bf(0x145)]('keydown',_0x21afa1=>keys[_0x21afa1[_0x2f24bf(0x154)]]=!![]),window['addEventListener'](_0x2f24bf(0xa0),_0x563dc8=>keys[_0x563dc8[_0x2f24bf(0x154)]]=![]),canvas[_0x2f24bf(0x145)](_0x2f24bf(0xdf),()=>keys[_0x2f24bf(0xd8)]=!![]),canvas['addEventListener']('mouseup',()=>keys['Click']=![]),canvas[_0x2f24bf(0x145)]('touchstart',_0x25be13=>{const _0xb303c9=_0x2f24bf;_0x25be13[_0xb303c9(0x130)](),keys['Click']=!![];},{'passive':![]}),canvas[_0x2f24bf(0x145)](_0x2f24bf(0x118),_0x15f932=>{const _0x33006f=_0x2f24bf;_0x15f932['preventDefault'](),keys[_0x33006f(0xd8)]=![];},{'passive':![]});const ui={'login':document[_0x2f24bf(0xe2)](_0x2f24bf(0x119)),'mainMenu':document['getElementById'](_0x2f24bf(0x150)),'leaderboard':document[_0x2f24bf(0xe2)](_0x2f24bf(0xd6)),'settings':document[_0x2f24bf(0xe2)](_0x2f24bf(0x17b)),'about':document[_0x2f24bf(0xe2)](_0x2f24bf(0x16d)),'gameOver':document[_0x2f24bf(0xe2)](_0x2f24bf(0xba)),'scoreBoard':document[_0x2f24bf(0xe2)](_0x2f24bf(0xd5)),'currentScore':document[_0x2f24bf(0xe2)](_0x2f24bf(0xaa)),'highScore':document[_0x2f24bf(0xe2)](_0x2f24bf(0x14a)),'finalScore':document['getElementById'](_0x2f24bf(0x144)),'tabLogin':document[_0x2f24bf(0xe2)](_0x2f24bf(0xf0)),'tabRegister':document['getElementById'](_0x2f24bf(0xf6)),'userIdInput':document[_0x2f24bf(0xe2)]('userid-input'),'usernameInput':document[_0x2f24bf(0xe2)]('username-input'),'authActionBtn':document['getElementById'](_0x2f24bf(0x11b)),'authMessage':document[_0x2f24bf(0xe2)]('auth-message'),'menuUsername':document[_0x2f24bf(0xe2)](_0x2f24bf(0x125)),'menuPlayBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0xcf)),'menuLeaderboardBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0xf1)),'menuSettingsBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0xfa)),'menuAboutBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0x10d)),'leaderboardBackBtn':document['getElementById'](_0x2f24bf(0x136)),'settingsBackBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0x177)),'logoutBtn':document['getElementById'](_0x2f24bf(0x107)),'aboutBackBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0x12e)),'musicToggle':document[_0x2f24bf(0xe2)](_0x2f24bf(0xcd)),'restartBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0x17d)),'homeBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0xe4)),'topScoresList':document[_0x2f24bf(0xe2)](_0x2f24bf(0x10a)),'pauseBtn':document['getElementById']('pause-btn'),'pauseOverlay':document['getElementById'](_0x2f24bf(0xd9)),'countdownText':document[_0x2f24bf(0xe2)](_0x2f24bf(0xed)),'resumeBtn':document['getElementById'](_0x2f24bf(0x17a)),'pauseHomeBtn':document[_0x2f24bf(0xe2)](_0x2f24bf(0xbc))},bgMusic=document[_0x2f24bf(0xe2)](_0x2f24bf(0x14f));let currentMusicIndex=0x0,lastScoreMilestone=0x0,isLoadingMusic=![],currentMusicSrc='',hasUserInteracted=![],pendingMusicAction=null,isRegisterMode=![],currentUser=null;function init(){const _0x5cd9e0=_0x2f24bf;resizeCanvas(),window[_0x5cd9e0(0x145)](_0x5cd9e0(0x132),resizeCanvas),setupUserInteractionDetection(),setupAuthUI(),setupMenuUI();const _0x22f365=localStorage['getItem'](_0x5cd9e0(0x161));_0x22f365&&(currentUser=JSON[_0x5cd9e0(0x14d)](_0x22f365),showMainMenu());const _0x3a239f=localStorage['getItem'](_0x5cd9e0(0x178))!==_0x5cd9e0(0xa8);if(ui['musicToggle'])ui[_0x5cd9e0(0xe8)]['checked']=_0x3a239f;if(ui[_0x5cd9e0(0x15f)])ui[_0x5cd9e0(0x15f)][_0x5cd9e0(0x145)](_0x5cd9e0(0x17f),resetGame);if(ui['homeBtn'])ui[_0x5cd9e0(0x12b)]['addEventListener']('click',showMainMenu);if(ui[_0x5cd9e0(0xe8)])ui[_0x5cd9e0(0xe8)][_0x5cd9e0(0x145)](_0x5cd9e0(0x13f),updateMusicState);if(ui[_0x5cd9e0(0x123)])ui['pauseBtn']['addEventListener'](_0x5cd9e0(0x17f),togglePause);if(ui[_0x5cd9e0(0xf5)])ui[_0x5cd9e0(0xf5)][_0x5cd9e0(0x145)]('click',resumeGameWithCountdown);if(ui[_0x5cd9e0(0x17e)])ui[_0x5cd9e0(0x17e)][_0x5cd9e0(0x145)](_0x5cd9e0(0x17f),goToMainMenuFromPause);const _0x3e791c=document['getElementById']('enter-fullscreen-btn');_0x3e791c&&_0x3e791c[_0x5cd9e0(0x145)](_0x5cd9e0(0x17f),enterFullscreen),window['addEventListener'](_0x5cd9e0(0x113),handleOrientationChange),window[_0x5cd9e0(0x145)]('resize',handleOrientationChange);}function setupUserInteractionDetection(){const _0x234200=_0x2f24bf,_0x19d1bb=['click',_0x234200(0x121),_0x234200(0x9c)],_0x42e535=()=>{const _0x1cbb55=_0x234200;!hasUserInteracted&&(hasUserInteracted=!![],console[_0x1cbb55(0x16f)](_0x1cbb55(0x16b)),pendingMusicAction&&(pendingMusicAction(),pendingMusicAction=null),_0x19d1bb['forEach'](_0x224e75=>{const _0x36c4f0=_0x1cbb55;document[_0x36c4f0(0x164)](_0x224e75,_0x42e535);}));};_0x19d1bb[_0x234200(0xac)](_0x5d6bb4=>{const _0x1ce120=_0x234200;document[_0x1ce120(0x145)](_0x5d6bb4,_0x42e535,{'once':!![]});});}function setupUserInteractionDetection(){const _0x37934c=_0x2f24bf,_0x4dc0d7=[_0x37934c(0x17f),_0x37934c(0x121),_0x37934c(0x9c)],_0x1771ac=()=>{const _0x27f1ef=_0x37934c;!hasUserInteracted&&(hasUserInteracted=!![],console['log'](_0x27f1ef(0x16b)),pendingMusicAction&&(pendingMusicAction(),pendingMusicAction=null),_0x4dc0d7[_0x27f1ef(0xac)](_0x1abf3a=>{const _0x365bd3=_0x27f1ef;document[_0x365bd3(0x164)](_0x1abf3a,_0x1771ac);}));};_0x4dc0d7[_0x37934c(0xac)](_0x21e651=>{const _0x5e0249=_0x37934c;document[_0x5e0249(0x145)](_0x21e651,_0x1771ac,{'once':!![]});});}function resizeCanvas(){const _0x83eb7f=_0x2f24bf,_0x21d8b7=document[_0x83eb7f(0xe2)](_0x83eb7f(0x15b));canvas[_0x83eb7f(0x149)]=_0x21d8b7[_0x83eb7f(0xee)],canvas[_0x83eb7f(0x153)]=_0x21d8b7[_0x83eb7f(0x141)],(gameRunning||gamePaused)&&(dino['x']=canvas[_0x83eb7f(0x149)]*0.2,dino[_0x83eb7f(0xce)]&&(dino['y']=canvas[_0x83eb7f(0x153)]-GROUND_HEIGHT-dino[_0x83eb7f(0x153)])),updateGameSpeed();}function setupAuthUI(){const _0x1507e8=_0x2f24bf;if(ui[_0x1507e8(0xc4)])ui[_0x1507e8(0xc4)][_0x1507e8(0x145)](_0x1507e8(0x17f),()=>switchAuthMode(![]));if(ui['tabRegister'])ui[_0x1507e8(0x143)][_0x1507e8(0x145)](_0x1507e8(0x17f),()=>switchAuthMode(!![]));if(ui['authActionBtn'])ui[_0x1507e8(0x128)][_0x1507e8(0x145)](_0x1507e8(0x17f),handleAuthAction);}function setupMenuUI(){const _0x1993d6=_0x2f24bf;if(ui[_0x1993d6(0x176)])ui[_0x1993d6(0x176)][_0x1993d6(0x145)](_0x1993d6(0x17f),startGame);if(ui[_0x1993d6(0x114)])ui[_0x1993d6(0x114)][_0x1993d6(0x145)](_0x1993d6(0x17f),showLeaderboard);if(ui[_0x1993d6(0xc8)])ui[_0x1993d6(0xc8)]['addEventListener'](_0x1993d6(0x17f),showSettings);if(ui[_0x1993d6(0x159)])ui[_0x1993d6(0x159)][_0x1993d6(0x145)]('click',showAbout);if(ui[_0x1993d6(0x93)])ui[_0x1993d6(0x93)]['addEventListener'](_0x1993d6(0x17f),showMainMenu);if(ui['settingsBackBtn'])ui[_0x1993d6(0x11a)][_0x1993d6(0x145)](_0x1993d6(0x17f),showMainMenu);if(ui[_0x1993d6(0x9a)])ui[_0x1993d6(0x9a)][_0x1993d6(0x145)](_0x1993d6(0x17f),showMainMenu);if(ui[_0x1993d6(0x11f)])ui[_0x1993d6(0x11f)]['addEventListener'](_0x1993d6(0x17f),logout);}function switchAuthMode(_0xca66af){const _0x1cd0f2=_0x2f24bf;isRegisterMode=_0xca66af,_0xca66af?(ui[_0x1cd0f2(0x143)]['classList'][_0x1cd0f2(0xdb)]('active'),ui['tabLogin'][_0x1cd0f2(0x169)][_0x1cd0f2(0x168)]('active'),ui['usernameInput'][_0x1cd0f2(0x169)][_0x1cd0f2(0x168)](_0x1cd0f2(0xf3)),ui['authActionBtn'][_0x1cd0f2(0xd7)]=_0x1cd0f2(0xb0)):(ui[_0x1cd0f2(0xc4)][_0x1cd0f2(0x169)][_0x1cd0f2(0xdb)](_0x1cd0f2(0x158)),ui[_0x1cd0f2(0x143)][_0x1cd0f2(0x169)][_0x1cd0f2(0x168)](_0x1cd0f2(0x158)),ui[_0x1cd0f2(0x179)]['classList']['add'](_0x1cd0f2(0xf3)),ui[_0x1cd0f2(0x128)][_0x1cd0f2(0xd7)]=_0x1cd0f2(0xfe)),ui[_0x1cd0f2(0x116)][_0x1cd0f2(0xd7)]='';}async function handleAuthAction(){const _0x11c3f3=_0x2f24bf,_0x96b401=ui['userIdInput'][_0x11c3f3(0xa4)]['trim'](),_0xd8a61c=ui[_0x11c3f3(0x179)][_0x11c3f3(0xa4)][_0x11c3f3(0xdd)]();if(!_0x96b401){ui[_0x11c3f3(0x116)]['textContent']=_0x11c3f3(0x120),ui[_0x11c3f3(0x116)]['style'][_0x11c3f3(0x117)]=_0x11c3f3(0xad);return;}ui[_0x11c3f3(0x128)][_0x11c3f3(0xb5)]=!![],ui[_0x11c3f3(0x128)][_0x11c3f3(0xd7)]=_0x11c3f3(0xe7);try{if(isRegisterMode){if(!_0xd8a61c)throw new Error(_0x11c3f3(0x12c));await registerUser(_0x96b401,_0xd8a61c);}else await loginUser(_0x96b401);localStorage[_0x11c3f3(0x9f)]('ruralRunner_user',JSON[_0x11c3f3(0x115)](currentUser)),showMainMenu();}catch(_0x1d0ded){ui[_0x11c3f3(0x116)][_0x11c3f3(0xd7)]=_0x1d0ded[_0x11c3f3(0x10f)],ui['authMessage']['style'][_0x11c3f3(0x117)]=_0x11c3f3(0xad),ui[_0x11c3f3(0x128)]['disabled']=![],ui[_0x11c3f3(0x128)][_0x11c3f3(0xd7)]=isRegisterMode?_0x11c3f3(0xb0):_0x11c3f3(0xfe);}}async function registerUser(_0x2f9bf9,_0x538dea){const _0x80b008=_0x2f24bf,_0x4f60f7=db[_0x80b008(0x98)](_0x80b008(0xf4))['doc'](_0x2f9bf9),_0x52361f=await _0x4f60f7[_0x80b008(0x110)]();if(_0x52361f['exists'])throw new Error(_0x80b008(0xb3));const _0xa20d52=await db['collection'](_0x80b008(0xf4))[_0x80b008(0x99)](_0x80b008(0x122),'==',_0x538dea)['get']();if(!_0xa20d52[_0x80b008(0xa2)])throw new Error(_0x80b008(0xe9));const _0x2daaf4={'name':_0x538dea,'highScore':0x0,'createdAt':firebase[_0x80b008(0x133)][_0x80b008(0xbd)][_0x80b008(0xa5)](),'lastUpdated':firebase[_0x80b008(0x133)][_0x80b008(0xbd)][_0x80b008(0xa5)]()};await _0x4f60f7[_0x80b008(0x12a)](_0x2daaf4),currentUser={'id':_0x2f9bf9,..._0x2daaf4},console['log'](_0x80b008(0xfb));}async function loginUser(_0x11d594){const _0x18b98e=_0x2f24bf,_0x1947f3=db['collection'](_0x18b98e(0xf4))[_0x18b98e(0x134)](_0x11d594),_0x200872=await _0x1947f3[_0x18b98e(0x110)]();if(!_0x200872[_0x18b98e(0xcc)])throw new Error(_0x18b98e(0xde));const _0x558541=_0x200872[_0x18b98e(0x106)]();typeof _0x558541[_0x18b98e(0x97)]!==_0x18b98e(0xf2)&&(_0x558541[_0x18b98e(0x97)]=0x0,await _0x1947f3[_0x18b98e(0x9b)]({'highScore':0x0}),console[_0x18b98e(0x16f)](_0x18b98e(0xbb),_0x11d594)),currentUser={'id':_0x11d594,..._0x558541},console[_0x18b98e(0x16f)](_0x18b98e(0x101),currentUser['name'],_0x18b98e(0x9e),currentUser[_0x18b98e(0x97)]);}async function fetchLeaderboard(){const _0x33a5f9=_0x2f24bf;try{ui[_0x33a5f9(0x166)]['innerHTML']=_0x33a5f9(0xb1),await new Promise(_0x2b1af4=>setTimeout(_0x2b1af4,0x64));const _0x143d0f=await db[_0x33a5f9(0x98)]('users')[_0x33a5f9(0xbf)](_0x33a5f9(0x97),_0x33a5f9(0xc9))[_0x33a5f9(0x127)](0x32)[_0x33a5f9(0x110)]();ui['topScoresList'][_0x33a5f9(0x146)]='';if(_0x143d0f[_0x33a5f9(0xa2)]){ui[_0x33a5f9(0x166)][_0x33a5f9(0x146)]='<li>No\x20scores\x20yet!</li>';return;}let _0x21c6cf=0x1;_0x143d0f[_0x33a5f9(0xac)](_0x542d53=>{const _0x522cfb=_0x33a5f9,_0x547354=_0x542d53['data'](),_0x58ed33=document['createElement']('li');_0x58ed33['innerHTML']=_0x522cfb(0x10c)+_0x21c6cf+'.\x20'+_0x547354[_0x522cfb(0x122)]+_0x522cfb(0x10b)+_0x542d53['id']+_0x522cfb(0xd0)+(_0x547354[_0x522cfb(0x97)]||0x0)+_0x522cfb(0x174),ui[_0x522cfb(0x166)]['appendChild'](_0x58ed33),_0x21c6cf++;});}catch(_0x4de551){console['error'](_0x33a5f9(0xc2),_0x4de551),ui['topScoresList'][_0x33a5f9(0x146)]='<li>Error\x20loading\x20scores.\x20<button\x20onclick=\x22fetchLeaderboard()\x22\x20style=\x22background:none;border:none;color:#4CAF50;cursor:pointer;text-decoration:underline;\x22>Retry</button></li>';}}function showMainMenu(){const _0x6351ea=_0x2f24bf;gameRunning=![];if(currentUser)ui[_0x6351ea(0x13e)]['textContent']=currentUser[_0x6351ea(0x122)];hideAllOverlays(),ui['mainMenu']['classList'][_0x6351ea(0x168)]('hidden'),ui[_0x6351ea(0x128)][_0x6351ea(0xb5)]=![],ui[_0x6351ea(0x128)][_0x6351ea(0xd7)]=isRegisterMode?'Register\x20&\x20Play':_0x6351ea(0xfe),playMenuMusic();}function showLeaderboard(){const _0x1eafba=_0x2f24bf;hideAllOverlays(),ui[_0x1eafba(0xb9)][_0x1eafba(0x169)][_0x1eafba(0x168)](_0x1eafba(0xf3)),fetchLeaderboard();}function showSettings(){const _0x2520d4=_0x2f24bf;hideAllOverlays(),ui[_0x2520d4(0x94)][_0x2520d4(0x169)][_0x2520d4(0x168)](_0x2520d4(0xf3));}function showAbout(){const _0x284b6b=_0x2f24bf;hideAllOverlays(),ui[_0x284b6b(0xcb)]['classList']['remove'](_0x284b6b(0xf3));}function hideAllOverlays(){const _0x25eed1=_0x2f24bf;ui[_0x25eed1(0xea)][_0x25eed1(0x169)][_0x25eed1(0xdb)]('hidden'),ui[_0x25eed1(0x14b)][_0x25eed1(0x169)][_0x25eed1(0xdb)](_0x25eed1(0xf3)),ui[_0x25eed1(0xb9)][_0x25eed1(0x169)]['add'](_0x25eed1(0xf3)),ui[_0x25eed1(0x94)]['classList']['add']('hidden');if(ui[_0x25eed1(0xcb)])ui[_0x25eed1(0xcb)][_0x25eed1(0x169)]['add'](_0x25eed1(0xf3));ui[_0x25eed1(0xaf)][_0x25eed1(0x169)][_0x25eed1(0xdb)]('hidden'),ui[_0x25eed1(0x152)][_0x25eed1(0x169)][_0x25eed1(0xdb)](_0x25eed1(0xf3));if(ui[_0x25eed1(0x123)])ui[_0x25eed1(0x123)][_0x25eed1(0x169)][_0x25eed1(0xdb)](_0x25eed1(0xf3));if(ui[_0x25eed1(0x10e)])ui[_0x25eed1(0x10e)][_0x25eed1(0x169)]['add'](_0x25eed1(0xf3));}function logout(){const _0x3f8cff=_0x2f24bf;localStorage['removeItem'](_0x3f8cff(0x161)),currentUser=null,hideAllOverlays(),ui[_0x3f8cff(0xea)][_0x3f8cff(0x169)]['remove'](_0x3f8cff(0xf3)),stopMusic();}function goToMainMenuFromPause(){gameRunning=![],gamePaused=![],isCountingDown=![],stopMusic(),showMainMenu();}function togglePause(){if(!gameRunning)return;!gamePaused?pauseGame():resumeGameWithCountdown();}function pauseGame(){const _0x31b9b7=_0x2f24bf;gamePaused=!![],pausedTime=performance[_0x31b9b7(0x92)](),ui['pauseOverlay'][_0x31b9b7(0x169)][_0x31b9b7(0x168)](_0x31b9b7(0xf3)),ui[_0x31b9b7(0x170)]['style'][_0x31b9b7(0xe6)]=_0x31b9b7(0xec),ui[_0x31b9b7(0x123)]['textContent']='▶',ui[_0x31b9b7(0x123)][_0x31b9b7(0x148)]=_0x31b9b7(0x139),!bgMusic[_0x31b9b7(0x95)]&&bgMusic[_0x31b9b7(0xca)]();}function resumeGameWithCountdown(){const _0x2a0a81=_0x2f24bf;if(gamePaused&&!isCountingDown){isCountingDown=!![],countdownValue=0x3,ui[_0x2a0a81(0x170)][_0x2a0a81(0xd7)]='3',ui[_0x2a0a81(0x170)][_0x2a0a81(0x126)]['display']=_0x2a0a81(0x16a);const _0x58ff91=setInterval(()=>{const _0x2e5979=_0x2a0a81;countdownValue--;if(countdownValue>0x0)ui[_0x2e5979(0x170)]['textContent']=countdownValue[_0x2e5979(0x138)]();else countdownValue===0x0?ui[_0x2e5979(0x170)]['textContent']='GO!':(clearInterval(_0x58ff91),ui['pauseOverlay'][_0x2e5979(0x169)][_0x2e5979(0xdb)](_0x2e5979(0xf3)),ui['countdownText'][_0x2e5979(0x126)][_0x2e5979(0xe6)]='none',ui[_0x2e5979(0x123)]['textContent']='⏸',ui['pauseBtn']['title']='Pause\x20Game',gamePaused=![],isCountingDown=![],lastTime=0x0,deltaTime=0x0,ui[_0x2e5979(0xe8)][_0x2e5979(0xc3)]&&bgMusic[_0x2e5979(0x95)]&&bgMusic[_0x2e5979(0xf9)]()['catch'](_0xf5c338=>console[_0x2e5979(0x16f)](_0x2e5979(0xb4),_0xf5c338)));},0x3e8);}}function playMenuMusic(){const _0x52d5d1=_0x2f24bf;if(!ui[_0x52d5d1(0xe8)][_0x52d5d1(0xc3)]||isLoadingMusic)return;const _0x4a0758=()=>{const _0x53091a=_0x52d5d1;if(currentMusicSrc!==menuTheme)isLoadingMusic=!![],bgMusic[_0x53091a(0xca)](),bgMusic[_0x53091a(0x173)]=menuTheme,currentMusicSrc=menuTheme,bgMusic[_0x53091a(0x124)]=!![],bgMusic[_0x53091a(0x145)](_0x53091a(0xda),function _0x4ff3c0(){const _0x375900=_0x53091a;bgMusic[_0x375900(0x164)](_0x375900(0xda),_0x4ff3c0),isLoadingMusic=![],ui[_0x375900(0xe8)][_0x375900(0xc3)]&&hasUserInteracted&&bgMusic['play']()[_0x375900(0x129)](_0x8c06eb=>console[_0x375900(0x16f)](_0x375900(0x103),_0x8c06eb));},{'once':!![]}),bgMusic['load']();else bgMusic['paused']&&!isLoadingMusic&&hasUserInteracted&&bgMusic[_0x53091a(0xf9)]()['catch'](_0x42c092=>console[_0x53091a(0x16f)](_0x53091a(0xef),_0x42c092));};hasUserInteracted?_0x4a0758():(pendingMusicAction=_0x4a0758,console[_0x52d5d1(0x16f)](_0x52d5d1(0xc7)));}function playGameMusic(){const _0x5a4e31=_0x2f24bf;if(!ui[_0x5a4e31(0xe8)][_0x5a4e31(0xc3)]||isLoadingMusic){console['log'](_0x5a4e31(0x167));return;}const _0x150bb4=musicTracks[Math[_0x5a4e31(0xb7)](Math[_0x5a4e31(0x13d)]()*musicTracks[_0x5a4e31(0xbe)])];if(currentMusicSrc===_0x150bb4&&!bgMusic[_0x5a4e31(0x95)])return;const _0x617204=()=>{const _0x1b7a74=_0x5a4e31;isLoadingMusic=!![],console['log'](_0x1b7a74(0x102),_0x150bb4),bgMusic[_0x1b7a74(0xca)](),bgMusic[_0x1b7a74(0x173)]=_0x150bb4,currentMusicSrc=_0x150bb4,bgMusic[_0x1b7a74(0x124)]=!![],bgMusic['addEventListener'](_0x1b7a74(0xda),function _0x110bdf(){const _0x8a3453=_0x1b7a74;bgMusic[_0x8a3453(0x164)](_0x8a3453(0xda),_0x110bdf),isLoadingMusic=![],ui[_0x8a3453(0xe8)][_0x8a3453(0xc3)]&&gameRunning&&!gamePaused&&hasUserInteracted&&bgMusic[_0x8a3453(0xf9)]()[_0x8a3453(0x129)](_0xf1e3fa=>console['log'](_0x8a3453(0x105),_0xf1e3fa));},{'once':!![]}),bgMusic['load']();};hasUserInteracted?_0x617204():(pendingMusicAction=_0x617204,console['log'](_0x5a4e31(0xa9)));}function changeGameMusic(_0x38ad98){const _0x42dad5=_0x2f24bf;if(!ui[_0x42dad5(0xe8)][_0x42dad5(0xc3)]||isLoadingMusic||!hasUserInteracted){console[_0x42dad5(0x16f)](_0x42dad5(0x163));return;}const _0x1054b5=Math[_0x42dad5(0xb7)](Math[_0x42dad5(0x13d)]()*musicTracks[_0x42dad5(0xbe)]),_0x3f21c1=musicTracks[_0x1054b5];if(currentMusicSrc===_0x3f21c1)return;isLoadingMusic=!![],console[_0x42dad5(0x16f)](_0x42dad5(0xeb)+Math[_0x42dad5(0xb7)](score)+_0x42dad5(0x15e)+(_0x1054b5+0x1)+':\x20'+_0x3f21c1),bgMusic[_0x42dad5(0xca)](),bgMusic[_0x42dad5(0x173)]=_0x3f21c1,currentMusicSrc=_0x3f21c1,bgMusic['loop']=!![],bgMusic[_0x42dad5(0x145)](_0x42dad5(0xda),function _0x564aba(){const _0x36613a=_0x42dad5;bgMusic[_0x36613a(0x164)](_0x36613a(0xda),_0x564aba),isLoadingMusic=![],ui[_0x36613a(0xe8)][_0x36613a(0xc3)]&&gameRunning&&!gamePaused&&hasUserInteracted&&bgMusic[_0x36613a(0xf9)]()[_0x36613a(0x129)](_0x3b19a0=>console[_0x36613a(0x16f)]('Music\x20change\x20failed:',_0x3b19a0));},{'once':!![]}),bgMusic[_0x42dad5(0x156)]();}function stopMusic(){const _0xf25ab7=_0x2f24bf;isLoadingMusic=![],bgMusic[_0xf25ab7(0xca)](),bgMusic[_0xf25ab7(0xfc)]=0x0;}function updateMusicState(){const _0x222de7=_0x2f24bf,_0x434a97=ui[_0x222de7(0xe8)][_0x222de7(0xc3)];localStorage[_0x222de7(0x9f)](_0x222de7(0x178),_0x434a97);if(_0x434a97){if(!gameRunning&&!ui[_0x222de7(0x14b)][_0x222de7(0x169)]['contains']('hidden'))playMenuMusic();else{if(gameRunning&&!isLoadingMusic&&hasUserInteracted){if(bgMusic[_0x222de7(0x95)])bgMusic[_0x222de7(0xf9)]()['catch'](_0x32cd1c=>console[_0x222de7(0x16f)](_0x222de7(0xb4),_0x32cd1c));}}}else bgMusic[_0x222de7(0xca)](),isLoadingMusic=![],pendingMusicAction=null;}function startGame(){const _0x51fb60=_0x2f24bf;hideAllOverlays(),ui[_0x51fb60(0x152)]['classList'][_0x51fb60(0x168)](_0x51fb60(0xf3)),ui['pauseBtn'][_0x51fb60(0x169)][_0x51fb60(0x168)](_0x51fb60(0xf3)),playGameMusic(),resetGame();}function resetGame(){const _0x2e5b0b=_0x2f24bf;gameRunning=!![],gamePaused=![],isCountingDown=![],score=0x0,updateGameSpeed(),obstacles=[],frameCount=0x0,currentMusicIndex=0x0,lastScoreMilestone=0x0,lastTime=0x0,deltaTime=0x0,dino['x']=canvas[_0x2e5b0b(0x149)]*0.2,dino['y']=canvas['height']-GROUND_HEIGHT-dino['height'],dino['dy']=0x0,ui[_0x2e5b0b(0xaf)][_0x2e5b0b(0x169)][_0x2e5b0b(0xdb)]('hidden'),ui['scoreBoard'][_0x2e5b0b(0x169)][_0x2e5b0b(0x168)](_0x2e5b0b(0xf3)),ui['pauseBtn'][_0x2e5b0b(0x169)][_0x2e5b0b(0x168)](_0x2e5b0b(0xf3)),ui['pauseBtn'][_0x2e5b0b(0xd7)]='⏸',ui[_0x2e5b0b(0x123)][_0x2e5b0b(0x148)]=_0x2e5b0b(0xa1),currentUser?ui['highScore'][_0x2e5b0b(0xd7)]=currentUser[_0x2e5b0b(0x97)]:ui['highScore'][_0x2e5b0b(0xd7)]='0',playGameMusic(),requestAnimationFrame(gameLoop);}function spawnObstacle(){const _0x5b1465=_0x2f24bf,_0x11631a=0x64,_0x365f86={'x':canvas[_0x5b1465(0x149)],'y':canvas[_0x5b1465(0x153)]-GROUND_HEIGHT-_0x11631a,'width':0x1e,'height':_0x11631a,'draw'(){const _0x54c65f=_0x5b1465;assets[_0x54c65f(0xd4)]['complete']&&assets['obstacle'][_0x54c65f(0x15d)]!==0x0?ctx[_0x54c65f(0x15a)](assets['obstacle'],this['x']-0xa,this['y'],0x78,0x78):(ctx[_0x54c65f(0x14e)]=_0x54c65f(0xf8),ctx['fillRect'](this['x'],this['y'],this[_0x54c65f(0x149)],this[_0x54c65f(0x153)]));}};obstacles[_0x5b1465(0x109)](_0x365f86);}function update(_0x10a8ce){const _0x2d4cf6=_0x2f24bf;if(!gameRunning)return;frameCount++,score+=0xa*_0x10a8ce,gameSpeed+=0x4*_0x10a8ce,updatePhysicsConstants(),ui['currentScore'][_0x2d4cf6(0xd7)]=Math[_0x2d4cf6(0xb7)](score);const _0x41a35e=Math[_0x2d4cf6(0xb7)](score/0x190);_0x41a35e>lastScoreMilestone&&_0x41a35e>0x0&&!isLoadingMusic&&(lastScoreMilestone=_0x41a35e,changeGameMusic(_0x41a35e));dino[_0x2d4cf6(0x9b)](_0x10a8ce),bgOffset-=gameSpeed*0.5*_0x10a8ce;if(bgOffset<=-canvas['width'])bgOffset=0x0;const _0xa8a258=Math[_0x2d4cf6(0xd2)](JUMP_FORCE)/GRAVITY,_0x4b1516=_0xa8a258*0x2,_0x34610b=gameSpeed/0x12c,_0x3e8c0b=Math[_0x2d4cf6(0xc6)](1.2,1.8-0.4*(_0x34610b-0x1));let _0x17bcd1=gameSpeed*Math[_0x2d4cf6(0xc6)](_0x3e8c0b,_0x4b1516*0.8),_0x137f32=_0x17bcd1+0x1f4;if(obstacles[_0x2d4cf6(0xbe)]===0x0)spawnObstacle();else{const _0x46b4d9=obstacles[obstacles[_0x2d4cf6(0xbe)]-0x1],_0x50a07e=canvas['width']-_0x46b4d9['x'];_0x50a07e>_0x17bcd1&&((Math[_0x2d4cf6(0x13d)]()<0.02*_0x10a8ce*0x3c||_0x50a07e>_0x137f32)&&spawnObstacle());}for(let _0x2ac606=obstacles[_0x2d4cf6(0xbe)]-0x1;_0x2ac606>=0x0;_0x2ac606--){let _0x407be6=obstacles[_0x2ac606];_0x407be6['x']-=gameSpeed*_0x10a8ce,dino['x']<_0x407be6['x']+_0x407be6[_0x2d4cf6(0x149)]&&dino['x']+dino[_0x2d4cf6(0x149)]>_0x407be6['x']&&dino['y']<_0x407be6['y']+_0x407be6[_0x2d4cf6(0x153)]&&dino['y']+dino['height']>_0x407be6['y']&&gameOver(),_0x407be6['x']+_0x407be6[_0x2d4cf6(0x149)]<0x0&&obstacles['splice'](_0x2ac606,0x1);}}function draw(){const _0x1605de=_0x2f24bf;ctx[_0x1605de(0x17c)](0x0,0x0,canvas['width'],canvas[_0x1605de(0x153)]),assets['background'][_0x1605de(0x171)]&&assets[_0x1605de(0x108)][_0x1605de(0x15d)]!==0x0?(ctx[_0x1605de(0x15a)](assets[_0x1605de(0x108)],bgOffset,0x0,canvas[_0x1605de(0x149)],canvas[_0x1605de(0x153)]),ctx[_0x1605de(0x15a)](assets[_0x1605de(0x108)],bgOffset+canvas['width'],0x0,canvas[_0x1605de(0x149)],canvas[_0x1605de(0x153)])):(ctx[_0x1605de(0x14e)]=_0x1605de(0x131),ctx[_0x1605de(0x12d)](0x0,canvas[_0x1605de(0x153)]-GROUND_HEIGHT,canvas[_0x1605de(0x149)],GROUND_HEIGHT),ctx[_0x1605de(0x14e)]=_0x1605de(0x11e),ctx[_0x1605de(0x12d)](0x0,0x0,canvas[_0x1605de(0x149)],canvas['height']-GROUND_HEIGHT)),obstacles[_0x1605de(0xac)](_0xce470d=>_0xce470d[_0x1605de(0x11c)]()),dino[_0x1605de(0x11c)]();}function _0x2516(){const _0x448c01=['Music\x20is\x20disabled\x20in\x20settings\x20or\x20no\x20user\x20interaction','removeEventListener','Space','topScoresList','Music\x20is\x20disabled\x20in\x20settings','remove','classList','block','User\x20interaction\x20detected\x20-\x20audio\x20enabled','Fullscreen\x20request\x20failed:','about-overlay','assets/music6.mp3','log','countdownText','complete','assets/music17.mp3','src','</span>','webkitFullscreenElement','menuPlayBtn','settings-back-btn','ruralRunner_music','usernameInput','resume-btn','settings-overlay','clearRect','restart-btn','pauseHomeBtn','click','now','leaderboardBackBtn','settings','paused','11964780MkDIFY','highScore','collection','where','aboutBackBtn','update','keydown','fullscreenElement','High\x20Score:','setItem','keyup','Pause\x20Game','empty','min','value','serverTimestamp','3895591PoAHIP','New\x20high\x20score\x20saved\x20to\x20leaderboard!','false','Game\x20music\x20queued\x20-\x20waiting\x20for\x20user\x20interaction','current-score','Error\x20saving\x20score\x20to\x20leaderboard:','forEach','red','assets/music9.mp3','gameOver','Register\x20&\x20Play','<li>Loading...</li>','368pmTHKy','User\x20ID\x20already\x20exists.\x20Please\x20login.','Music\x20resume\x20failed:','disabled','sqrt','floor','assets/music8.mp3','leaderboard','game-over-overlay','Fixed\x20missing\x20highScore\x20for\x20user:','pause-home-btn','FieldValue','length','orderBy','assets/music15.mp3','ArrowUp','Error\x20fetching\x20leaderboard:','checked','tabLogin','80469xlAmRQ','max','Menu\x20music\x20queued\x20-\x20waiting\x20for\x20user\x20interaction','menuSettingsBtn','desc','pause','about','exists','music-toggle','grounded','menu-play-btn',')</small></span>\x20<span>','mozCancelFullScreen','abs','#FF5722','obstacle','score-board','leaderboard-overlay','textContent','Click','pause-overlay','canplaythrough','add','requestFullscreen','trim','User\x20ID\x20not\x20found.\x20Please\x20register.','mousedown','assets/character_sprite.png','4159458rcJkSY','getElementById','135IEaHup','home-btn','assets/music14.mp3','display','Processing...','musicToggle','Display\x20Name\x20is\x20already\x20taken.\x20Please\x20choose\x20another.','login','Changing\x20music\x20at\x20score\x20','none','countdown-text','clientWidth','Menu\x20music\x20resume\x20failed:','tab-login','menu-leaderboard-btn','number','hidden','users','resumeBtn','tab-register','webkitExitFullscreen','#880E4F','play','menu-settings-btn','User\x20registered\x20successfully\x20with\x20highScore\x20initialized\x20to\x200','currentTime','msExitFullscreen','Login\x20&\x20Play','error','19590uBuxiH','User\x20logged\x20in:','Playing\x20game\x20music:','Menu\x20music\x20play\x20failed:','webkitRequestFullscreen','Game\x20music\x20play\x20failed:','data','logout-btn','background','push','top-scores-list','\x20<small>(','<span>','menu-about-btn','pauseOverlay','message','get','assets/music2.mp3','jump','orientationchange','menuLeaderboardBtn','stringify','authMessage','color','touchend','login-overlay','settingsBackBtn','auth-action-btn','draw','character','#E0F7FA','logoutBtn','User\x20ID\x20is\x20required.','touchstart','name','pauseBtn','loop','menu-username','style','limit','authActionBtn','catch','set','homeBtn','Name\x20is\x20required\x20for\x20registration.','fillRect','about-back-btn','assets/music1.mp3','preventDefault','#81C784','resize','firestore','doc','assets/music12.mp3','leaderboard-back-btn','180756eXVKCX','toString','Resume\x20Game','21oXAnka','assets/main_menu_theme.mp3','finalScore','random','menuUsername','change','assets/game_background.png','clientHeight','innerHeight','tabRegister','final-score','addEventListener','innerHTML','test','title','width','high-score','mainMenu','assets/music5.mp3','parse','fillStyle','bg-music','main-menu-overlay','mozRequestFullScreen','scoreBoard','height','code','innerWidth','load','exitFullscreen','active','menuAboutBtn','drawImage','game-container','userAgent','naturalWidth','\x20to\x20random\x20track\x20','restartBtn','4892130FVGoMf','ruralRunner_user','assets/music3.mp3'];_0x2516=function(){return _0x448c01;};return _0x2516();}function gameLoop(_0xcb97f2){if(!gameRunning)return;if(gamePaused||isCountingDown){requestAnimationFrame(gameLoop);return;}lastTime===0x0&&(lastTime=_0xcb97f2),deltaTime=(_0xcb97f2-lastTime)/0x3e8,lastTime=_0xcb97f2,deltaTime=Math['min'](deltaTime,0x1/0x1e),update(deltaTime),draw(),requestAnimationFrame(gameLoop);}function _0x5e2d(_0x2fe812,_0x16f14e){_0x2fe812=_0x2fe812-0x92;const _0x25166b=_0x2516();let _0x5e2d7d=_0x25166b[_0x2fe812];return _0x5e2d7d;}async function gameOver(){const _0x992a0c=_0x2f24bf;gameRunning=![],gamePaused=![],isCountingDown=![],stopMusic();const _0x2bb42b=Math[_0x992a0c(0xb7)](score);ui[_0x992a0c(0x13c)]['textContent']=_0x2bb42b,ui[_0x992a0c(0xaf)][_0x992a0c(0x169)][_0x992a0c(0x168)](_0x992a0c(0xf3)),ui[_0x992a0c(0x152)]['classList'][_0x992a0c(0xdb)](_0x992a0c(0xf3)),ui[_0x992a0c(0x123)][_0x992a0c(0x169)][_0x992a0c(0xdb)](_0x992a0c(0xf3));if(currentUser&&_0x2bb42b>currentUser['highScore']){currentUser[_0x992a0c(0x97)]=_0x2bb42b,localStorage[_0x992a0c(0x9f)](_0x992a0c(0x161),JSON[_0x992a0c(0x115)](currentUser));try{await db['collection'](_0x992a0c(0xf4))[_0x992a0c(0x134)](currentUser['id'])['update']({'highScore':_0x2bb42b}),console['log'](_0x992a0c(0xa7));}catch(_0x15544a){console[_0x992a0c(0xff)](_0x992a0c(0xab),_0x15544a);}}}function enterFullscreen(){const _0x16aee5=_0x2f24bf,_0xb5c758=document['documentElement'];if(_0xb5c758[_0x16aee5(0xdc)])_0xb5c758[_0x16aee5(0xdc)]()[_0x16aee5(0x129)](_0x2be79c=>{const _0x26825b=_0x16aee5;console[_0x26825b(0x16f)](_0x26825b(0x16c),_0x2be79c);});else{if(_0xb5c758[_0x16aee5(0x104)])_0xb5c758[_0x16aee5(0x104)]();else{if(_0xb5c758[_0x16aee5(0x151)])_0xb5c758[_0x16aee5(0x151)]();else _0xb5c758['msRequestFullscreen']&&_0xb5c758['msRequestFullscreen']();}}}function exitFullscreen(){const _0x4128d8=_0x2f24bf;if(document[_0x4128d8(0x157)])document[_0x4128d8(0x157)]();else{if(document[_0x4128d8(0xf7)])document['webkitExitFullscreen']();else{if(document[_0x4128d8(0xd1)])document['mozCancelFullScreen']();else document['msExitFullscreen']&&document[_0x4128d8(0xfd)]();}}}function isMobileDevice(){const _0x182c37=_0x2f24bf;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i[_0x182c37(0x147)](navigator[_0x182c37(0x15c)]);}function isLandscape(){const _0x41c65b=_0x2f24bf;return window[_0x41c65b(0x155)]>window[_0x41c65b(0x142)];}function handleOrientationChange(){const _0x265ad2=_0x2f24bf;isMobileDevice()&&isLandscape()&&!document[_0x265ad2(0x9d)]&&!document[_0x265ad2(0x175)]&&setTimeout(()=>{isLandscape()&&enterFullscreen();},0x12c);}init();