const _0x2a2eb1=_0x338b;(function(_0x23e86a,_0x19d24d){const _0x226059=_0x338b,_0x11f601=_0x23e86a();while(!![]){try{const _0x3d8bd8=parseInt(_0x226059(0x219))/0x1+-parseInt(_0x226059(0x1b3))/0x2*(-parseInt(_0x226059(0x1b0))/0x3)+-parseInt(_0x226059(0x226))/0x4+-parseInt(_0x226059(0x250))/0x5+parseInt(_0x226059(0x252))/0x6+parseInt(_0x226059(0x209))/0x7+parseInt(_0x226059(0x1f6))/0x8*(-parseInt(_0x226059(0x25e))/0x9);if(_0x3d8bd8===_0x19d24d)break;else _0x11f601['push'](_0x11f601['shift']());}catch(_0x4556f7){_0x11f601['push'](_0x11f601['shift']());}}}(_0xb2e4,0x67f62));const canvas=document[_0x2a2eb1(0x1e3)]('gameCanvas'),ctx=canvas['getContext']('2d');let gameRunning=![],gamePaused=![],isCountingDown=![],countdownValue=0x0,pausedTime=0x0,baseGameSpeed=0x14,gameSpeed=0x14,score=0x0,frameCount=0x0,username='',lastTime=0x0,deltaTime=0x0;function getGameSpeedMultiplier(){const _0xc49a17=_0x2a2eb1,_0x3756f6=window[_0xc49a17(0x257)],_0x43352f=window[_0xc49a17(0x203)],_0x4bf007=_0x3756f6>=0x400&&_0x43352f>=0x258;if(_0x4bf007)return 1.8;return 0x1;}function updateGameSpeed(){const _0x316f06=getGameSpeedMultiplier();baseGameSpeed=0x12c*_0x316f06,gameSpeed=baseGameSpeed;}const assets={'character':new Image(),'background':new Image(),'obstacle':new Image()};assets[_0x2a2eb1(0x23d)][_0x2a2eb1(0x215)]=_0x2a2eb1(0x19d),assets[_0x2a2eb1(0x23e)][_0x2a2eb1(0x215)]=_0x2a2eb1(0x275),assets[_0x2a2eb1(0x218)]['src']=_0x2a2eb1(0x1f3);const musicTracks=[_0x2a2eb1(0x1c5),_0x2a2eb1(0x1cf),_0x2a2eb1(0x1d2),'assets/music4.mp3',_0x2a2eb1(0x24e),_0x2a2eb1(0x1a7),_0x2a2eb1(0x256),_0x2a2eb1(0x229),_0x2a2eb1(0x1c1),_0x2a2eb1(0x1f9),_0x2a2eb1(0x267),'assets/music12.mp3',_0x2a2eb1(0x214),'assets/music14.mp3',_0x2a2eb1(0x210),_0x2a2eb1(0x273)],menuTheme=_0x2a2eb1(0x1cd),GRAVITY=0x4b0,JUMP_FORCE=-0x258,GROUND_HEIGHT=0x32,dino={'x':0x0,'y':0x0,'width':0x78,'height':0x96,'dy':0x0,'jumpTimer':0x0,'grounded':![],'draw'(){const _0x33abd4=_0x2a2eb1;assets['character']['complete']&&assets[_0x33abd4(0x23d)][_0x33abd4(0x20c)]!==0x0?ctx['drawImage'](assets[_0x33abd4(0x23d)],this['x'],this['y'],this[_0x33abd4(0x217)],this[_0x33abd4(0x1b2)]):(ctx[_0x33abd4(0x243)]='#FF5722',ctx['fillRect'](this['x'],this['y'],this[_0x33abd4(0x217)],this[_0x33abd4(0x1b2)]));},'update'(_0x49c677){const _0x34fe0a=_0x2a2eb1;(keys['Space']||keys[_0x34fe0a(0x25b)]||keys[_0x34fe0a(0x1d8)])&&this['jump'](),this['y']+=this['dy']*_0x49c677,this['y']+this[_0x34fe0a(0x1b2)]>canvas[_0x34fe0a(0x1b2)]-GROUND_HEIGHT?(this['y']=canvas[_0x34fe0a(0x1b2)]-GROUND_HEIGHT-this[_0x34fe0a(0x1b2)],this['dy']=0x0,this['grounded']=!![]):(this['dy']+=GRAVITY*_0x49c677,this[_0x34fe0a(0x1bb)]=![]);},'jump'(){const _0x485f89=_0x2a2eb1;this['grounded']&&(this['dy']=JUMP_FORCE,this[_0x485f89(0x1bb)]=![]);}};let obstacles=[],bgOffset=0x0;const keys={};function _0xb2e4(){const _0x29e2f4=['Fullscreen\x20request\x20failed:','innerHeight','leaderboard-back-btn','code','Music\x20change\x20failed:','log','Login\x20&\x20Play','5143215YbfTjc','addEventListener','touchend','naturalWidth','now','message','change','assets/music15.mp3','FieldValue','keyup','active','assets/music13.mp3','src','desc','width','obstacle','170207jFQLIJ','Pause\x20Game','menuPlayBtn','touchstart','menu-play-btn','<li>No\x20scores\x20yet!</li>','enter-fullscreen-btn','Playing\x20game\x20music:','Processing...','leaderboardBackBtn','value','preventDefault','test','55816EHHpKQ','about','stringify','assets/music8.mp3','authActionBtn','High\x20Score:','mousedown','scoreBoard','disabled','data','requestFullscreen','Menu\x20music\x20play\x20failed:','countdown-text','menu-settings-btn','doc','catch','userAgent','gameOver','homeBtn','click','resize','pause-btn','color','character','background','home-btn','top-scores-list','users','exitFullscreen','fillStyle','pauseBtn','firestore','empty','setItem','topScoresList','User\x20ID\x20already\x20exists.\x20Please\x20login.','error','pauseOverlay','current-score','orientationchange','assets/music5.mp3','auth-action-btn','1117245pTKSsN','logoutBtn','2672670bXWaZL','includes','about-back-btn','toString','assets/music7.mp3','innerWidth','high-score','username-input','appendChild','ArrowUp','keydown','red','8087049QbrFHX','main_menu_theme.mp3','loop','settings-overlay','block','login-overlay','menuLeaderboardBtn','tabRegister','menuSettingsBtn','assets/music11.mp3','createElement','number','add','serverTimestamp','final-score','usernameInput','Error\x20fetching\x20leaderboard:','userIdInput','update','style','paused','assets/music16.mp3','draw','assets/game_background.png','pause','Error\x20saving\x20score\x20to\x20leaderboard:','User\x20registered\x20successfully\x20with\x20highScore\x20initialized\x20to\x200','assets/character_sprite.png','settingsBackBtn','mozCancelFullScreen','resume-btn','currentScore','menuAboutBtn','userid-input','msRequestFullscreen','innerHTML','#880E4F','assets/music6.mp3','trim','login','limit','<li>Error\x20loading\x20scores.\x20<button\x20onclick=\x22fetchLeaderboard()\x22\x20style=\x22background:none;border:none;color:#4CAF50;cursor:pointer;text-decoration:underline;\x22>Retry</button></li>','#E0F7FA','bg-music','Resume\x20Game','hidden','2121VpQAaV','remove','height','598JetSlh','Name\x20is\x20required\x20for\x20registration.','length','exists','menu-username','restartBtn','Display\x20Name\x20is\x20already\x20taken.\x20Please\x20choose\x20another.','ruralRunner_music','grounded','User\x20logged\x20in:','clearRect','checked','none','orderBy','assets/music9.mp3','musicToggle','name','push','assets/music1.mp3',')</small></span>\x20<span>','countdownText','ruralRunner_user','complete','forEach','\x20<small>(','tab-register','assets/main_menu_theme.mp3','min','assets/music2.mp3','random','floor','assets/music3.mp3','clientHeight','get','tabLogin','removeItem','resumeBtn','Click','authMessage','webkitExitFullscreen','currentTime','auth-message','score-board','Register\x20&\x20Play','textContent','webkitRequestFullscreen','highScore','collection','getElementById','mozRequestFullScreen','mainMenu','</span>','webkitFullscreenElement','menu-leaderboard-btn','mouseup','title','leaderboard-overlay','finalScore','<li>Loading...</li>','leaderboard','fillRect','pause-overlay','msExitFullscreen','drawImage','assets/obstacle_doll.png','classList','restart-btn','8CoTyrE','pause-home-btn','New\x20high\x20score\x20saved\x20to\x20leaderboard!','assets/music10.mp3','play','aboutBackBtn','settings','main-menu-overlay','pauseHomeBtn','display','game-over-overlay','<span>'];_0xb2e4=function(){return _0x29e2f4;};return _0xb2e4();}window['addEventListener'](_0x2a2eb1(0x25c),_0x3e2414=>keys[_0x3e2414[_0x2a2eb1(0x205)]]=!![]),window[_0x2a2eb1(0x20a)](_0x2a2eb1(0x212),_0x32655f=>keys[_0x32655f[_0x2a2eb1(0x205)]]=![]),canvas[_0x2a2eb1(0x20a)](_0x2a2eb1(0x22c),()=>keys[_0x2a2eb1(0x1d8)]=!![]),canvas[_0x2a2eb1(0x20a)](_0x2a2eb1(0x1e9),()=>keys[_0x2a2eb1(0x1d8)]=![]),canvas[_0x2a2eb1(0x20a)](_0x2a2eb1(0x21c),_0x18415b=>{const _0x4536be=_0x2a2eb1;_0x18415b[_0x4536be(0x224)](),keys[_0x4536be(0x1d8)]=!![];},{'passive':![]}),canvas['addEventListener'](_0x2a2eb1(0x20b),_0x353cb5=>{const _0x3ca697=_0x2a2eb1;_0x353cb5[_0x3ca697(0x224)](),keys['Click']=![];},{'passive':![]});const ui={'login':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x263)),'mainMenu':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1fd)),'leaderboard':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1eb)),'settings':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x261)),'about':document[_0x2a2eb1(0x1e3)]('about-overlay'),'gameOver':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x200)),'scoreBoard':document['getElementById'](_0x2a2eb1(0x1dd)),'currentScore':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x24c)),'highScore':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x258)),'finalScore':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x26c)),'tabLogin':document[_0x2a2eb1(0x1e3)]('tab-login'),'tabRegister':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1cc)),'userIdInput':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1a3)),'usernameInput':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x259)),'authActionBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x24f)),'authMessage':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1dc)),'menuUsername':document['getElementById'](_0x2a2eb1(0x1b7)),'menuPlayBtn':document['getElementById'](_0x2a2eb1(0x21d)),'menuLeaderboardBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1e8)),'menuSettingsBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x233)),'menuAboutBtn':document[_0x2a2eb1(0x1e3)]('menu-about-btn'),'leaderboardBackBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x204)),'settingsBackBtn':document['getElementById']('settings-back-btn'),'logoutBtn':document[_0x2a2eb1(0x1e3)]('logout-btn'),'aboutBackBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x254)),'musicToggle':document['getElementById']('music-toggle'),'restartBtn':document['getElementById'](_0x2a2eb1(0x1f5)),'homeBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x23f)),'topScoresList':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x240)),'pauseBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x23b)),'pauseOverlay':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1f0)),'countdownText':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x232)),'resumeBtn':document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1a0)),'pauseHomeBtn':document['getElementById'](_0x2a2eb1(0x1f7))},bgMusic=document[_0x2a2eb1(0x1e3)](_0x2a2eb1(0x1ad));let currentMusicIndex=0x0,lastScoreMilestone=0x0,isRegisterMode=![],currentUser=null;function init(){const _0x4deb7e=_0x2a2eb1;resizeCanvas(),window[_0x4deb7e(0x20a)](_0x4deb7e(0x23a),resizeCanvas),setupAuthUI(),setupMenuUI();const _0x1f5801=localStorage['getItem'](_0x4deb7e(0x1c8));_0x1f5801&&(currentUser=JSON['parse'](_0x1f5801),showMainMenu());const _0x29395f=localStorage['getItem'](_0x4deb7e(0x1ba))!=='false';if(ui[_0x4deb7e(0x1c2)])ui['musicToggle']['checked']=_0x29395f;if(ui['restartBtn'])ui[_0x4deb7e(0x1b8)][_0x4deb7e(0x20a)]('click',resetGame);if(ui[_0x4deb7e(0x238)])ui[_0x4deb7e(0x238)][_0x4deb7e(0x20a)]('click',showMainMenu);if(ui['musicToggle'])ui[_0x4deb7e(0x1c2)]['addEventListener'](_0x4deb7e(0x20f),updateMusicState);if(ui[_0x4deb7e(0x244)])ui[_0x4deb7e(0x244)]['addEventListener']('click',togglePause);if(ui[_0x4deb7e(0x1d7)])ui[_0x4deb7e(0x1d7)][_0x4deb7e(0x20a)]('click',resumeGameWithCountdown);if(ui[_0x4deb7e(0x1fe)])ui[_0x4deb7e(0x1fe)][_0x4deb7e(0x20a)](_0x4deb7e(0x239),goToMainMenuFromPause);const _0x5144cf=document[_0x4deb7e(0x1e3)](_0x4deb7e(0x21f));_0x5144cf&&_0x5144cf['addEventListener']('click',enterFullscreen),window[_0x4deb7e(0x20a)](_0x4deb7e(0x24d),handleOrientationChange),window[_0x4deb7e(0x20a)]('resize',handleOrientationChange);}function resizeCanvas(){const _0x282327=_0x2a2eb1,_0x44ee19=document[_0x282327(0x1e3)]('game-container');canvas[_0x282327(0x217)]=_0x44ee19['clientWidth'],canvas[_0x282327(0x1b2)]=_0x44ee19[_0x282327(0x1d3)],(gameRunning||gamePaused)&&(dino['x']=canvas[_0x282327(0x217)]*0.2,dino['grounded']&&(dino['y']=canvas['height']-GROUND_HEIGHT-dino[_0x282327(0x1b2)])),updateGameSpeed();}function setupAuthUI(){const _0x5009d5=_0x2a2eb1;if(ui[_0x5009d5(0x1d5)])ui[_0x5009d5(0x1d5)]['addEventListener'](_0x5009d5(0x239),()=>switchAuthMode(![]));if(ui['tabRegister'])ui[_0x5009d5(0x265)][_0x5009d5(0x20a)](_0x5009d5(0x239),()=>switchAuthMode(!![]));if(ui['authActionBtn'])ui[_0x5009d5(0x22a)][_0x5009d5(0x20a)](_0x5009d5(0x239),handleAuthAction);}function setupMenuUI(){const _0x57ed6f=_0x2a2eb1;if(ui[_0x57ed6f(0x21b)])ui[_0x57ed6f(0x21b)][_0x57ed6f(0x20a)](_0x57ed6f(0x239),startGame);if(ui[_0x57ed6f(0x264)])ui[_0x57ed6f(0x264)][_0x57ed6f(0x20a)](_0x57ed6f(0x239),showLeaderboard);if(ui[_0x57ed6f(0x266)])ui[_0x57ed6f(0x266)][_0x57ed6f(0x20a)]('click',showSettings);if(ui['menuAboutBtn'])ui[_0x57ed6f(0x1a2)][_0x57ed6f(0x20a)](_0x57ed6f(0x239),showAbout);if(ui[_0x57ed6f(0x222)])ui['leaderboardBackBtn'][_0x57ed6f(0x20a)]('click',showMainMenu);if(ui[_0x57ed6f(0x19e)])ui[_0x57ed6f(0x19e)][_0x57ed6f(0x20a)](_0x57ed6f(0x239),showMainMenu);if(ui[_0x57ed6f(0x1fb)])ui[_0x57ed6f(0x1fb)][_0x57ed6f(0x20a)]('click',showMainMenu);if(ui[_0x57ed6f(0x251)])ui['logoutBtn'][_0x57ed6f(0x20a)](_0x57ed6f(0x239),logout);}function switchAuthMode(_0x5dd74c){const _0x2286ad=_0x2a2eb1;isRegisterMode=_0x5dd74c,_0x5dd74c?(ui[_0x2286ad(0x265)][_0x2286ad(0x1f4)][_0x2286ad(0x26a)](_0x2286ad(0x213)),ui[_0x2286ad(0x1d5)][_0x2286ad(0x1f4)][_0x2286ad(0x1b1)]('active'),ui['usernameInput'][_0x2286ad(0x1f4)][_0x2286ad(0x1b1)](_0x2286ad(0x1af)),ui[_0x2286ad(0x22a)]['textContent']=_0x2286ad(0x1de)):(ui[_0x2286ad(0x1d5)]['classList'][_0x2286ad(0x26a)](_0x2286ad(0x213)),ui[_0x2286ad(0x265)]['classList'][_0x2286ad(0x1b1)]('active'),ui['usernameInput']['classList'][_0x2286ad(0x26a)]('hidden'),ui[_0x2286ad(0x22a)][_0x2286ad(0x1df)]='Login\x20&\x20Play'),ui[_0x2286ad(0x1d9)][_0x2286ad(0x1df)]='';}async function handleAuthAction(){const _0x421898=_0x2a2eb1,_0xf55bfc=ui[_0x421898(0x26f)][_0x421898(0x223)][_0x421898(0x1a8)](),_0x559b49=ui[_0x421898(0x26d)][_0x421898(0x223)][_0x421898(0x1a8)]();if(!_0xf55bfc){ui[_0x421898(0x1d9)][_0x421898(0x1df)]='User\x20ID\x20is\x20required.',ui[_0x421898(0x1d9)][_0x421898(0x271)]['color']=_0x421898(0x25d);return;}ui[_0x421898(0x22a)]['disabled']=!![],ui['authActionBtn'][_0x421898(0x1df)]=_0x421898(0x221);try{if(isRegisterMode){if(!_0x559b49)throw new Error(_0x421898(0x1b4));await registerUser(_0xf55bfc,_0x559b49);}else await loginUser(_0xf55bfc);localStorage['setItem'](_0x421898(0x1c8),JSON[_0x421898(0x228)](currentUser)),showMainMenu();}catch(_0x1fb64f){ui['authMessage']['textContent']=_0x1fb64f[_0x421898(0x20e)],ui[_0x421898(0x1d9)][_0x421898(0x271)][_0x421898(0x23c)]=_0x421898(0x25d),ui[_0x421898(0x22a)][_0x421898(0x22e)]=![],ui[_0x421898(0x22a)][_0x421898(0x1df)]=isRegisterMode?_0x421898(0x1de):_0x421898(0x208);}}async function registerUser(_0x1140e7,_0x33be9a){const _0x404fd3=_0x2a2eb1,_0x3e043a=db[_0x404fd3(0x1e2)](_0x404fd3(0x241))['doc'](_0x1140e7),_0x5374ad=await _0x3e043a[_0x404fd3(0x1d4)]();if(_0x5374ad[_0x404fd3(0x1b6)])throw new Error(_0x404fd3(0x249));const _0x56a363=await db['collection']('users')['where'](_0x404fd3(0x1c3),'==',_0x33be9a)[_0x404fd3(0x1d4)]();if(!_0x56a363[_0x404fd3(0x246)])throw new Error(_0x404fd3(0x1b9));const _0x4d2c09={'name':_0x33be9a,'highScore':0x0,'createdAt':firebase['firestore']['FieldValue']['serverTimestamp'](),'lastUpdated':firebase[_0x404fd3(0x245)][_0x404fd3(0x211)][_0x404fd3(0x26b)]()};await _0x3e043a['set'](_0x4d2c09),currentUser={'id':_0x1140e7,..._0x4d2c09},console[_0x404fd3(0x207)](_0x404fd3(0x19c));}async function loginUser(_0x282e22){const _0x335480=_0x2a2eb1,_0x5c82bc=db[_0x335480(0x1e2)](_0x335480(0x241))['doc'](_0x282e22),_0x28c34a=await _0x5c82bc[_0x335480(0x1d4)]();if(!_0x28c34a[_0x335480(0x1b6)])throw new Error('User\x20ID\x20not\x20found.\x20Please\x20register.');const _0x1d069b=_0x28c34a[_0x335480(0x22f)]();typeof _0x1d069b[_0x335480(0x1e1)]!==_0x335480(0x269)&&(_0x1d069b[_0x335480(0x1e1)]=0x0,await _0x5c82bc[_0x335480(0x270)]({'highScore':0x0}),console[_0x335480(0x207)]('Fixed\x20missing\x20highScore\x20for\x20user:',_0x282e22)),currentUser={'id':_0x282e22,..._0x1d069b},console[_0x335480(0x207)](_0x335480(0x1bc),currentUser['name'],_0x335480(0x22b),currentUser[_0x335480(0x1e1)]);}async function fetchLeaderboard(){const _0x3beca9=_0x2a2eb1;try{ui[_0x3beca9(0x248)]['innerHTML']=_0x3beca9(0x1ed),await new Promise(_0xf7aa3f=>setTimeout(_0xf7aa3f,0x64));const _0x4dd4c1=await db['collection'](_0x3beca9(0x241))[_0x3beca9(0x1c0)](_0x3beca9(0x1e1),_0x3beca9(0x216))[_0x3beca9(0x1aa)](0x32)[_0x3beca9(0x1d4)]();ui[_0x3beca9(0x248)][_0x3beca9(0x1a5)]='';if(_0x4dd4c1['empty']){ui[_0x3beca9(0x248)][_0x3beca9(0x1a5)]=_0x3beca9(0x21e);return;}let _0x128ac8=0x1;_0x4dd4c1[_0x3beca9(0x1ca)](_0x5579d1=>{const _0x39e728=_0x3beca9,_0x5f2fdd=_0x5579d1['data'](),_0x2d9300=document[_0x39e728(0x268)]('li');_0x2d9300[_0x39e728(0x1a5)]=_0x39e728(0x201)+_0x128ac8+'.\x20'+_0x5f2fdd[_0x39e728(0x1c3)]+_0x39e728(0x1cb)+_0x5579d1['id']+_0x39e728(0x1c6)+(_0x5f2fdd['highScore']||0x0)+_0x39e728(0x1e6),ui[_0x39e728(0x248)][_0x39e728(0x25a)](_0x2d9300),_0x128ac8++;});}catch(_0x3b93bc){console[_0x3beca9(0x24a)](_0x3beca9(0x26e),_0x3b93bc),ui['topScoresList'][_0x3beca9(0x1a5)]=_0x3beca9(0x1ab);}}function showMainMenu(){const _0x59df5a=_0x2a2eb1;gameRunning=![];if(currentUser)ui['menuUsername'][_0x59df5a(0x1df)]=currentUser[_0x59df5a(0x1c3)];hideAllOverlays(),ui[_0x59df5a(0x1e5)][_0x59df5a(0x1f4)][_0x59df5a(0x1b1)]('hidden'),ui[_0x59df5a(0x22a)]['disabled']=![],ui[_0x59df5a(0x22a)]['textContent']=isRegisterMode?_0x59df5a(0x1de):_0x59df5a(0x208),playMenuMusic();}function showLeaderboard(){const _0x5471d9=_0x2a2eb1;hideAllOverlays(),ui[_0x5471d9(0x1ee)][_0x5471d9(0x1f4)]['remove'](_0x5471d9(0x1af)),fetchLeaderboard();}function showSettings(){const _0x21e317=_0x2a2eb1;hideAllOverlays(),ui[_0x21e317(0x1fc)][_0x21e317(0x1f4)][_0x21e317(0x1b1)](_0x21e317(0x1af));}function showAbout(){const _0x2c7d7e=_0x2a2eb1;hideAllOverlays(),ui[_0x2c7d7e(0x227)][_0x2c7d7e(0x1f4)][_0x2c7d7e(0x1b1)](_0x2c7d7e(0x1af));}function hideAllOverlays(){const _0x2e6fa7=_0x2a2eb1;ui[_0x2e6fa7(0x1a9)][_0x2e6fa7(0x1f4)][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af)),ui['mainMenu'][_0x2e6fa7(0x1f4)][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af)),ui[_0x2e6fa7(0x1ee)][_0x2e6fa7(0x1f4)]['add']('hidden'),ui['settings'][_0x2e6fa7(0x1f4)][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af));if(ui[_0x2e6fa7(0x227)])ui[_0x2e6fa7(0x227)][_0x2e6fa7(0x1f4)][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af));ui['gameOver'][_0x2e6fa7(0x1f4)][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af)),ui[_0x2e6fa7(0x22d)]['classList'][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af));if(ui[_0x2e6fa7(0x244)])ui[_0x2e6fa7(0x244)]['classList'][_0x2e6fa7(0x26a)](_0x2e6fa7(0x1af));if(ui[_0x2e6fa7(0x24b)])ui['pauseOverlay'][_0x2e6fa7(0x1f4)][_0x2e6fa7(0x26a)]('hidden');}function logout(){const _0x6cdbf0=_0x2a2eb1;localStorage[_0x6cdbf0(0x1d6)]('ruralRunner_user'),currentUser=null,hideAllOverlays(),ui[_0x6cdbf0(0x1a9)][_0x6cdbf0(0x1f4)][_0x6cdbf0(0x1b1)]('hidden'),stopMusic();}function goToMainMenuFromPause(){gameRunning=![],gamePaused=![],isCountingDown=![],stopMusic(),showMainMenu();}function togglePause(){if(!gameRunning)return;!gamePaused?pauseGame():resumeGameWithCountdown();}function pauseGame(){const _0x49f039=_0x2a2eb1;gamePaused=!![],pausedTime=performance[_0x49f039(0x20d)](),ui[_0x49f039(0x24b)][_0x49f039(0x1f4)][_0x49f039(0x1b1)]('hidden'),ui[_0x49f039(0x1c7)][_0x49f039(0x271)][_0x49f039(0x1ff)]=_0x49f039(0x1bf),ui['pauseBtn']['textContent']='▶',ui[_0x49f039(0x244)][_0x49f039(0x1ea)]=_0x49f039(0x1ae),!bgMusic[_0x49f039(0x272)]&&bgMusic[_0x49f039(0x276)]();}function resumeGameWithCountdown(){const _0x3486a1=_0x2a2eb1;if(gamePaused&&!isCountingDown){isCountingDown=!![],countdownValue=0x3,ui[_0x3486a1(0x1c7)][_0x3486a1(0x1df)]='3',ui[_0x3486a1(0x1c7)][_0x3486a1(0x271)][_0x3486a1(0x1ff)]=_0x3486a1(0x262);const _0x1308f0=setInterval(()=>{const _0x5ac5a8=_0x3486a1;countdownValue--;if(countdownValue>0x0)ui['countdownText']['textContent']=countdownValue[_0x5ac5a8(0x255)]();else countdownValue===0x0?ui[_0x5ac5a8(0x1c7)][_0x5ac5a8(0x1df)]='GO!':(clearInterval(_0x1308f0),ui[_0x5ac5a8(0x24b)][_0x5ac5a8(0x1f4)][_0x5ac5a8(0x26a)](_0x5ac5a8(0x1af)),ui[_0x5ac5a8(0x1c7)]['style'][_0x5ac5a8(0x1ff)]=_0x5ac5a8(0x1bf),ui['pauseBtn'][_0x5ac5a8(0x1df)]='⏸',ui['pauseBtn'][_0x5ac5a8(0x1ea)]=_0x5ac5a8(0x21a),gamePaused=![],isCountingDown=![],lastTime=0x0,deltaTime=0x0,ui[_0x5ac5a8(0x1c2)]['checked']&&bgMusic[_0x5ac5a8(0x272)]&&bgMusic[_0x5ac5a8(0x1fa)]()[_0x5ac5a8(0x235)](_0x4e77b1=>console[_0x5ac5a8(0x207)]('Music\x20resume\x20failed:',_0x4e77b1)));},0x3e8);}}function playMenuMusic(){const _0x5f0a4f=_0x2a2eb1;if(!ui['musicToggle'][_0x5f0a4f(0x1be)])return;if(!bgMusic[_0x5f0a4f(0x215)][_0x5f0a4f(0x253)](_0x5f0a4f(0x25f)))bgMusic['src']=menuTheme,bgMusic[_0x5f0a4f(0x260)]=!![],bgMusic['play']()['catch'](_0x18e11d=>console['log'](_0x5f0a4f(0x231),_0x18e11d));else bgMusic[_0x5f0a4f(0x272)]&&bgMusic['play']()[_0x5f0a4f(0x235)](_0x6d3fca=>console['log']('Menu\x20music\x20resume\x20failed:',_0x6d3fca));}function playGameMusic(){const _0x2e2257=_0x2a2eb1;if(!ui[_0x2e2257(0x1c2)][_0x2e2257(0x1be)]){console['log']('Music\x20is\x20disabled\x20in\x20settings');return;}const _0x3d833d=musicTracks[Math[_0x2e2257(0x1d1)](Math[_0x2e2257(0x1d0)]()*musicTracks[_0x2e2257(0x1b5)])];console[_0x2e2257(0x207)](_0x2e2257(0x220),_0x3d833d),bgMusic[_0x2e2257(0x215)]=_0x3d833d,bgMusic[_0x2e2257(0x260)]=!![],bgMusic[_0x2e2257(0x1fa)]()['catch'](_0x29ff8c=>console[_0x2e2257(0x207)]('Game\x20music\x20play\x20failed:',_0x29ff8c));}function changeGameMusic(_0x5ba70a){const _0x33e842=_0x2a2eb1;if(!ui[_0x33e842(0x1c2)][_0x33e842(0x1be)]){console[_0x33e842(0x207)]('Music\x20is\x20disabled\x20in\x20settings');return;}const _0x4f74de=Math['floor'](Math['random']()*musicTracks[_0x33e842(0x1b5)]),_0x4bd219=musicTracks[_0x4f74de];console[_0x33e842(0x207)]('Changing\x20music\x20at\x20score\x20'+Math[_0x33e842(0x1d1)](score)+'\x20to\x20random\x20track\x20'+(_0x4f74de+0x1)+':\x20'+_0x4bd219),bgMusic['src']=_0x4bd219,bgMusic[_0x33e842(0x260)]=!![],bgMusic[_0x33e842(0x1fa)]()[_0x33e842(0x235)](_0xbe67a8=>console[_0x33e842(0x207)](_0x33e842(0x206),_0xbe67a8));}function stopMusic(){const _0x1d8f6c=_0x2a2eb1;bgMusic[_0x1d8f6c(0x276)](),bgMusic[_0x1d8f6c(0x1db)]=0x0;}function updateMusicState(){const _0x253c74=_0x2a2eb1,_0x4689eb=ui['musicToggle'][_0x253c74(0x1be)];localStorage[_0x253c74(0x247)](_0x253c74(0x1ba),_0x4689eb);if(_0x4689eb){if(!gameRunning&&!ui[_0x253c74(0x1e5)][_0x253c74(0x1f4)]['contains'](_0x253c74(0x1af)))playMenuMusic();else{if(gameRunning){if(bgMusic[_0x253c74(0x272)])bgMusic[_0x253c74(0x1fa)]();}}}else bgMusic[_0x253c74(0x276)]();}function startGame(){const _0x23f49e=_0x2a2eb1;hideAllOverlays(),ui[_0x23f49e(0x22d)][_0x23f49e(0x1f4)][_0x23f49e(0x1b1)](_0x23f49e(0x1af)),ui[_0x23f49e(0x244)][_0x23f49e(0x1f4)][_0x23f49e(0x1b1)]('hidden'),playGameMusic(),resetGame();}function resetGame(){const _0x274a0a=_0x2a2eb1;gameRunning=!![],gamePaused=![],isCountingDown=![],score=0x0,updateGameSpeed(),obstacles=[],frameCount=0x0,currentMusicIndex=0x0,lastScoreMilestone=0x0,lastTime=0x0,deltaTime=0x0,dino['x']=canvas['width']*0.2,dino['y']=canvas[_0x274a0a(0x1b2)]-GROUND_HEIGHT-dino['height'],dino['dy']=0x0,ui[_0x274a0a(0x237)][_0x274a0a(0x1f4)]['add'](_0x274a0a(0x1af)),ui['scoreBoard'][_0x274a0a(0x1f4)][_0x274a0a(0x1b1)](_0x274a0a(0x1af)),ui[_0x274a0a(0x244)]['classList']['remove']('hidden'),ui[_0x274a0a(0x244)][_0x274a0a(0x1df)]='⏸',ui[_0x274a0a(0x244)][_0x274a0a(0x1ea)]=_0x274a0a(0x21a),currentUser?ui[_0x274a0a(0x1e1)][_0x274a0a(0x1df)]=currentUser[_0x274a0a(0x1e1)]:ui[_0x274a0a(0x1e1)][_0x274a0a(0x1df)]='0',playGameMusic(),requestAnimationFrame(gameLoop);}function spawnObstacle(){const _0x150d71=_0x2a2eb1,_0x48bfe2=0x64,_0x3b4eed={'x':canvas[_0x150d71(0x217)],'y':canvas[_0x150d71(0x1b2)]-GROUND_HEIGHT-_0x48bfe2,'width':0x1e,'height':_0x48bfe2,'draw'(){const _0x48e152=_0x150d71;assets['obstacle'][_0x48e152(0x1c9)]&&assets[_0x48e152(0x218)][_0x48e152(0x20c)]!==0x0?ctx[_0x48e152(0x1f2)](assets['obstacle'],this['x']-0xa,this['y'],0x78,0x78):(ctx[_0x48e152(0x243)]=_0x48e152(0x1a6),ctx[_0x48e152(0x1ef)](this['x'],this['y'],this[_0x48e152(0x217)],this[_0x48e152(0x1b2)]));}};obstacles[_0x150d71(0x1c4)](_0x3b4eed);}function update(_0x28d821){const _0x252eb4=_0x2a2eb1;if(!gameRunning)return;frameCount++,score+=0xa*_0x28d821,gameSpeed+=0x8*_0x28d821,ui[_0x252eb4(0x1a1)]['textContent']=Math[_0x252eb4(0x1d1)](score);const _0x4ed687=Math['floor'](score/0x12c);_0x4ed687>lastScoreMilestone&&_0x4ed687>0x0&&(lastScoreMilestone=_0x4ed687,changeGameMusic(_0x4ed687));dino[_0x252eb4(0x270)](_0x28d821),bgOffset-=gameSpeed*0.5*_0x28d821;if(bgOffset<=-canvas['width'])bgOffset=0x0;let _0x51e967=gameSpeed*1.5,_0x2097de=_0x51e967+0x1f4;if(obstacles['length']===0x0)spawnObstacle();else{const _0x503f1b=obstacles[obstacles[_0x252eb4(0x1b5)]-0x1],_0x49775d=canvas['width']-_0x503f1b['x'];_0x49775d>_0x51e967&&((Math[_0x252eb4(0x1d0)]()<0.02*_0x28d821*0x3c||_0x49775d>_0x2097de)&&spawnObstacle());}for(let _0x47964d=obstacles['length']-0x1;_0x47964d>=0x0;_0x47964d--){let _0xf125a5=obstacles[_0x47964d];_0xf125a5['x']-=gameSpeed*_0x28d821,dino['x']<_0xf125a5['x']+_0xf125a5[_0x252eb4(0x217)]&&dino['x']+dino['width']>_0xf125a5['x']&&dino['y']<_0xf125a5['y']+_0xf125a5['height']&&dino['y']+dino[_0x252eb4(0x1b2)]>_0xf125a5['y']&&gameOver(),_0xf125a5['x']+_0xf125a5['width']<0x0&&obstacles['splice'](_0x47964d,0x1);}}function draw(){const _0x14aace=_0x2a2eb1;ctx[_0x14aace(0x1bd)](0x0,0x0,canvas[_0x14aace(0x217)],canvas[_0x14aace(0x1b2)]),assets[_0x14aace(0x23e)][_0x14aace(0x1c9)]&&assets[_0x14aace(0x23e)][_0x14aace(0x20c)]!==0x0?(ctx[_0x14aace(0x1f2)](assets[_0x14aace(0x23e)],bgOffset,0x0,canvas[_0x14aace(0x217)],canvas[_0x14aace(0x1b2)]),ctx[_0x14aace(0x1f2)](assets[_0x14aace(0x23e)],bgOffset+canvas[_0x14aace(0x217)],0x0,canvas[_0x14aace(0x217)],canvas[_0x14aace(0x1b2)])):(ctx[_0x14aace(0x243)]='#81C784',ctx[_0x14aace(0x1ef)](0x0,canvas[_0x14aace(0x1b2)]-GROUND_HEIGHT,canvas[_0x14aace(0x217)],GROUND_HEIGHT),ctx[_0x14aace(0x243)]=_0x14aace(0x1ac),ctx['fillRect'](0x0,0x0,canvas['width'],canvas['height']-GROUND_HEIGHT)),obstacles['forEach'](_0x532e74=>_0x532e74[_0x14aace(0x274)]()),dino[_0x14aace(0x274)]();}function gameLoop(_0x2383cb){const _0x440a59=_0x2a2eb1;if(!gameRunning)return;if(gamePaused||isCountingDown){requestAnimationFrame(gameLoop);return;}lastTime===0x0&&(lastTime=_0x2383cb),deltaTime=(_0x2383cb-lastTime)/0x3e8,lastTime=_0x2383cb,deltaTime=Math[_0x440a59(0x1ce)](deltaTime,0x1/0x1e),update(deltaTime),draw(),requestAnimationFrame(gameLoop);}async function gameOver(){const _0xc79943=_0x2a2eb1;gameRunning=![],gamePaused=![],isCountingDown=![],stopMusic();const _0x37e450=Math[_0xc79943(0x1d1)](score);ui[_0xc79943(0x1ec)][_0xc79943(0x1df)]=_0x37e450,ui[_0xc79943(0x237)][_0xc79943(0x1f4)][_0xc79943(0x1b1)](_0xc79943(0x1af)),ui[_0xc79943(0x22d)]['classList'][_0xc79943(0x26a)]('hidden'),ui['pauseBtn']['classList'][_0xc79943(0x26a)](_0xc79943(0x1af));if(currentUser&&_0x37e450>currentUser['highScore']){currentUser[_0xc79943(0x1e1)]=_0x37e450,localStorage[_0xc79943(0x247)](_0xc79943(0x1c8),JSON[_0xc79943(0x228)](currentUser));try{await db[_0xc79943(0x1e2)](_0xc79943(0x241))[_0xc79943(0x234)](currentUser['id'])[_0xc79943(0x270)]({'highScore':_0x37e450}),console['log'](_0xc79943(0x1f8));}catch(_0x3052a1){console[_0xc79943(0x24a)](_0xc79943(0x277),_0x3052a1);}}}function _0x338b(_0x38348a,_0x541d38){_0x38348a=_0x38348a-0x19c;const _0xb2e405=_0xb2e4();let _0x338b97=_0xb2e405[_0x38348a];return _0x338b97;}function enterFullscreen(){const _0x5e537f=_0x2a2eb1,_0x9ec91c=document['documentElement'];if(_0x9ec91c[_0x5e537f(0x230)])_0x9ec91c[_0x5e537f(0x230)]()['catch'](_0xc8ae79=>{const _0xf859e5=_0x5e537f;console[_0xf859e5(0x207)](_0xf859e5(0x202),_0xc8ae79);});else{if(_0x9ec91c[_0x5e537f(0x1e0)])_0x9ec91c[_0x5e537f(0x1e0)]();else{if(_0x9ec91c[_0x5e537f(0x1e4)])_0x9ec91c[_0x5e537f(0x1e4)]();else _0x9ec91c[_0x5e537f(0x1a4)]&&_0x9ec91c[_0x5e537f(0x1a4)]();}}}function exitFullscreen(){const _0x8a727d=_0x2a2eb1;if(document['exitFullscreen'])document[_0x8a727d(0x242)]();else{if(document[_0x8a727d(0x1da)])document[_0x8a727d(0x1da)]();else{if(document[_0x8a727d(0x19f)])document['mozCancelFullScreen']();else document['msExitFullscreen']&&document[_0x8a727d(0x1f1)]();}}}function isMobileDevice(){const _0x4f6d5d=_0x2a2eb1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i[_0x4f6d5d(0x225)](navigator[_0x4f6d5d(0x236)]);}function isLandscape(){const _0x822ddd=_0x2a2eb1;return window[_0x822ddd(0x257)]>window['innerHeight'];}function handleOrientationChange(){const _0x497b62=_0x2a2eb1;isMobileDevice()&&isLandscape()&&!document['fullscreenElement']&&!document[_0x497b62(0x1e7)]&&setTimeout(()=>{isLandscape()&&enterFullscreen();},0x12c);}init();