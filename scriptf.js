const _0x2ad86e=_0x57bd;(function(_0x17b4ee,_0x18c32b){const _0x266877=_0x57bd,_0x137ea5=_0x17b4ee();while(!![]){try{const _0x2c4df0=-parseInt(_0x266877(0x152))/0x1+-parseInt(_0x266877(0xc8))/0x2*(-parseInt(_0x266877(0xa0))/0x3)+parseInt(_0x266877(0x147))/0x4*(parseInt(_0x266877(0xd8))/0x5)+-parseInt(_0x266877(0x13d))/0x6*(-parseInt(_0x266877(0xd4))/0x7)+-parseInt(_0x266877(0xee))/0x8*(parseInt(_0x266877(0x13a))/0x9)+-parseInt(_0x266877(0xf3))/0xa*(parseInt(_0x266877(0x136))/0xb)+-parseInt(_0x266877(0xf4))/0xc;if(_0x2c4df0===_0x18c32b)break;else _0x137ea5['push'](_0x137ea5['shift']());}catch(_0x597f03){_0x137ea5['push'](_0x137ea5['shift']());}}}(_0x4c12,0x4fe59));const canvas=document[_0x2ad86e(0x94)](_0x2ad86e(0x82)),ctx=canvas[_0x2ad86e(0xb2)]('2d');let gameRunning=![],gamePaused=![],isCountingDown=![],countdownValue=0x0,pausedTime=0x0,baseGameSpeed=0x14,gameSpeed=0x14,score=0x0,frameCount=0x0,username='',lastTime=0x0,deltaTime=0x0;function getGameSpeedMultiplier(){const _0x104f8a=_0x2ad86e,_0xa70ce7=window[_0x104f8a(0x12b)],_0x13418e=window['innerHeight'],_0x42d8b9=_0xa70ce7>=0x400&&_0x13418e>=0x258;if(_0x42d8b9)return 1.8;return 0x1;}function updateGameSpeed(){const _0x323c92=getGameSpeedMultiplier();baseGameSpeed=0xc8*_0x323c92,gameSpeed=baseGameSpeed;}const assets={'character':new Image(),'background':new Image(),'obstacle':new Image()};assets['character'][_0x2ad86e(0x8f)]=_0x2ad86e(0x116),assets[_0x2ad86e(0xf5)]['src']=_0x2ad86e(0xff),assets[_0x2ad86e(0x8a)][_0x2ad86e(0x8f)]='assets/obstacle_doll.png';const musicTracks=[_0x2ad86e(0x160),'assets/music2.mp3',_0x2ad86e(0x97),_0x2ad86e(0x125),_0x2ad86e(0xdf),'assets/music6.mp3','assets/music7.mp3',_0x2ad86e(0x129),'assets/music9.mp3',_0x2ad86e(0x15c),_0x2ad86e(0xb8),_0x2ad86e(0x122),'assets/music13.mp3',_0x2ad86e(0xd7),_0x2ad86e(0x13c),_0x2ad86e(0xde)],menuTheme=_0x2ad86e(0xbd),GRAVITY=0x4b0,JUMP_FORCE=-0x258,GROUND_HEIGHT=0x32,dino={'x':0x0,'y':0x0,'width':0x78,'height':0x96,'dy':0x0,'jumpTimer':0x0,'grounded':![],'draw'(){const _0x15c8a4=_0x2ad86e;assets[_0x15c8a4(0xd5)][_0x15c8a4(0x11c)]&&assets[_0x15c8a4(0xd5)]['naturalWidth']!==0x0?ctx[_0x15c8a4(0x121)](assets[_0x15c8a4(0xd5)],this['x'],this['y'],this[_0x15c8a4(0x159)],this['height']):(ctx[_0x15c8a4(0x83)]=_0x15c8a4(0x10a),ctx[_0x15c8a4(0x15e)](this['x'],this['y'],this[_0x15c8a4(0x159)],this['height']));},'update'(_0x2a0d46){const _0x2c33e7=_0x2ad86e;(keys[_0x2c33e7(0xe5)]||keys[_0x2c33e7(0xb5)]||keys[_0x2c33e7(0x12f)])&&this['jump'](),this['y']+=this['dy']*_0x2a0d46,this['y']+this[_0x2c33e7(0xec)]>canvas[_0x2c33e7(0xec)]-GROUND_HEIGHT?(this['y']=canvas[_0x2c33e7(0xec)]-GROUND_HEIGHT-this[_0x2c33e7(0xec)],this['dy']=0x0,this['grounded']=!![]):(this['dy']+=GRAVITY*_0x2a0d46,this[_0x2c33e7(0xf8)]=![]);},'jump'(){const _0x19e2c9=_0x2ad86e;this['grounded']&&(this['dy']=JUMP_FORCE,this[_0x19e2c9(0xf8)]=![]);}};let obstacles=[],bgOffset=0x0;const keys={};function _0x4c12(){const _0x5408a0=['menu-settings-btn','collection','#E0F7FA','userIdInput','Name\x20is\x20required\x20for\x20registration.','settings-back-btn','click','New\x20high\x20score\x20saved\x20to\x20leaderboard!','#FF5722','menuPlayBtn','mozRequestFullScreen','pause-overlay','disabled','remove','loop','webkitExitFullscreen','clientWidth','empty','get','draw','assets/character_sprite.png','hidden','finalScore','textContent','createElement','forEach','complete','mainMenu','logoutBtn','block','naturalWidth','drawImage','assets/music12.mp3','menuAboutBtn','display','assets/music4.mp3','clearRect','error','ruralRunner_music','assets/music8.mp3','serverTimestamp','innerWidth','Pause\x20Game','enter-fullscreen-btn','countdownText','Click','innerHeight','<li>Error\x20loading\x20scores.\x20<button\x20onclick=\x22fetchLeaderboard()\x22\x20style=\x22background:none;border:none;color:#4CAF50;cursor:pointer;text-decoration:underline;\x22>Retry</button></li>','highScore','FieldValue','game-container','doc','11BLpCzL','auth-action-btn','trim','menu-leaderboard-btn','2894949obEhZg','exitFullscreen','assets/music15.mp3','3800466LBubLy','exists','menuSettingsBtn','touchstart','removeEventListener','about-back-btn','menuLeaderboardBtn','mouseup','Menu\x20music\x20queued\x20-\x20waiting\x20for\x20user\x20interaction','checked','916MbWOlD','music-toggle','musicToggle','pause-home-btn','load','resize','#81C784','currentTime','authMessage','countdown-text','logout-btn','167036WbMCXC','stringify','Changing\x20music\x20at\x20score\x20','authActionBtn','resume-btn','pauseOverlay','menu-play-btn','width','catch','leaderboardBackBtn','assets/music10.mp3','random','fillRect','message','assets/music1.mp3','menu-about-btn','User\x20logged\x20in:','pauseHomeBtn','paused','none','gameCanvas','fillStyle','documentElement','#880E4F','pauseBtn','menu-username','userAgent','usernameInput','obstacle','style','name','resumeBtn','topScoresList','src','\x20to\x20random\x20track\x20','play','about','color','getElementById','getItem','settings-overlay','assets/music3.mp3','<li>Loading...</li>','currentScore','value','clientHeight','parse','fullscreenElement','login','Music\x20is\x20disabled\x20in\x20settings\x20or\x20no\x20user\x20interaction','1870269NfaExM','webkitRequestFullscreen','splice','<span>','mozCancelFullScreen','leaderboard-overlay','length','push','User\x20registered\x20successfully\x20with\x20highScore\x20initialized\x20to\x200','firestore','add','Resume\x20Game','Playing\x20game\x20music:','Display\x20Name\x20is\x20already\x20taken.\x20Please\x20choose\x20another.','User\x20ID\x20is\x20required.','red','contains','GO!','getContext','Music\x20resume\x20failed:','msExitFullscreen','ArrowUp','code','aboutBackBtn','assets/music11.mp3','classList','requestFullscreen','update','mousedown','assets/main_menu_theme.mp3','false','tabLogin','Error\x20fetching\x20leaderboard:','auth-message','tabRegister','setItem','floor','orderBy','settings','leaderboard-back-btn','2SLMXoY','title',')</small></span>\x20<span>','change','where','homeBtn','Menu\x20music\x20play\x20failed:','userid-input','touchend','ruralRunner_user','restart-btn','now','7LKMCVH','character','appendChild','assets/music14.mp3','9830DKQFdr','log','menuUsername','msRequestFullscreen','restartBtn','limit','assets/music16.mp3','assets/music5.mp3','scoreBoard','canplaythrough','keydown','removeItem','active','Space','min','high-score','gameOver','tab-register','main-menu-overlay','Music\x20change\x20failed:','height','settingsBackBtn','8YjlRtr','innerHTML','Fixed\x20missing\x20highScore\x20for\x20user:','</span>','addEventListener','2216230IWJJTi','8033652KEtZaq','background','username-input','pause','grounded','Login\x20&\x20Play','Register\x20&\x20Play','User\x20interaction\x20detected\x20-\x20audio\x20enabled','orientationchange','game-over-overlay','Processing...','assets/game_background.png','users','current-score'];_0x4c12=function(){return _0x5408a0;};return _0x4c12();}window[_0x2ad86e(0xf2)](_0x2ad86e(0xe2),_0x3d0387=>keys[_0x3d0387[_0x2ad86e(0xb6)]]=!![]),window[_0x2ad86e(0xf2)]('keyup',_0x45aa37=>keys[_0x45aa37['code']]=![]),canvas[_0x2ad86e(0xf2)](_0x2ad86e(0xbc),()=>keys['Click']=!![]),canvas[_0x2ad86e(0xf2)](_0x2ad86e(0x144),()=>keys[_0x2ad86e(0x12f)]=![]),canvas[_0x2ad86e(0xf2)](_0x2ad86e(0x140),_0x46c495=>{const _0x121122=_0x2ad86e;_0x46c495['preventDefault'](),keys[_0x121122(0x12f)]=!![];},{'passive':![]}),canvas[_0x2ad86e(0xf2)](_0x2ad86e(0xd0),_0x495f01=>{_0x495f01['preventDefault'](),keys['Click']=![];},{'passive':![]});const ui={'login':document[_0x2ad86e(0x94)]('login-overlay'),'mainMenu':document[_0x2ad86e(0x94)](_0x2ad86e(0xea)),'leaderboard':document[_0x2ad86e(0x94)](_0x2ad86e(0xa5)),'settings':document[_0x2ad86e(0x94)](_0x2ad86e(0x96)),'about':document[_0x2ad86e(0x94)]('about-overlay'),'gameOver':document['getElementById'](_0x2ad86e(0xfd)),'scoreBoard':document['getElementById']('score-board'),'currentScore':document['getElementById'](_0x2ad86e(0x101)),'highScore':document[_0x2ad86e(0x94)](_0x2ad86e(0xe7)),'finalScore':document[_0x2ad86e(0x94)]('final-score'),'tabLogin':document[_0x2ad86e(0x94)]('tab-login'),'tabRegister':document[_0x2ad86e(0x94)](_0x2ad86e(0xe9)),'userIdInput':document[_0x2ad86e(0x94)](_0x2ad86e(0xcf)),'usernameInput':document[_0x2ad86e(0x94)](_0x2ad86e(0xf6)),'authActionBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x137)),'authMessage':document['getElementById'](_0x2ad86e(0xc1)),'menuUsername':document[_0x2ad86e(0x94)](_0x2ad86e(0x87)),'menuPlayBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x158)),'menuLeaderboardBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x139)),'menuSettingsBtn':document['getElementById'](_0x2ad86e(0x102)),'menuAboutBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x161)),'leaderboardBackBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0xc7)),'settingsBackBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x107)),'logoutBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x151)),'aboutBackBtn':document[_0x2ad86e(0x94)](_0x2ad86e(0x142)),'musicToggle':document[_0x2ad86e(0x94)](_0x2ad86e(0x148)),'restartBtn':document['getElementById'](_0x2ad86e(0xd2)),'homeBtn':document[_0x2ad86e(0x94)]('home-btn'),'topScoresList':document[_0x2ad86e(0x94)]('top-scores-list'),'pauseBtn':document['getElementById']('pause-btn'),'pauseOverlay':document['getElementById'](_0x2ad86e(0x10d)),'countdownText':document[_0x2ad86e(0x94)](_0x2ad86e(0x150)),'resumeBtn':document['getElementById'](_0x2ad86e(0x156)),'pauseHomeBtn':document['getElementById'](_0x2ad86e(0x14a))},bgMusic=document[_0x2ad86e(0x94)]('bg-music');let currentMusicIndex=0x0,lastScoreMilestone=0x0,isLoadingMusic=![],currentMusicSrc='',hasUserInteracted=![],pendingMusicAction=null,isRegisterMode=![],currentUser=null;function init(){const _0x231ead=_0x2ad86e;resizeCanvas(),window['addEventListener'](_0x231ead(0x14c),resizeCanvas),setupUserInteractionDetection(),setupAuthUI(),setupMenuUI();const _0x3d05b0=localStorage[_0x231ead(0x95)]('ruralRunner_user');_0x3d05b0&&(currentUser=JSON[_0x231ead(0x9c)](_0x3d05b0),showMainMenu());const _0x38e21d=localStorage[_0x231ead(0x95)](_0x231ead(0x128))!==_0x231ead(0xbe);if(ui[_0x231ead(0x149)])ui[_0x231ead(0x149)][_0x231ead(0x146)]=_0x38e21d;if(ui['restartBtn'])ui[_0x231ead(0xdc)][_0x231ead(0xf2)]('click',resetGame);if(ui['homeBtn'])ui[_0x231ead(0xcd)]['addEventListener'](_0x231ead(0x108),showMainMenu);if(ui[_0x231ead(0x149)])ui[_0x231ead(0x149)][_0x231ead(0xf2)](_0x231ead(0xcb),updateMusicState);if(ui[_0x231ead(0x86)])ui[_0x231ead(0x86)][_0x231ead(0xf2)](_0x231ead(0x108),togglePause);if(ui[_0x231ead(0x8d)])ui['resumeBtn'][_0x231ead(0xf2)](_0x231ead(0x108),resumeGameWithCountdown);if(ui[_0x231ead(0x163)])ui['pauseHomeBtn'][_0x231ead(0xf2)]('click',goToMainMenuFromPause);const _0x28ac40=document['getElementById'](_0x231ead(0x12d));_0x28ac40&&_0x28ac40['addEventListener']('click',enterFullscreen),window[_0x231ead(0xf2)](_0x231ead(0xfc),handleOrientationChange),window[_0x231ead(0xf2)](_0x231ead(0x14c),handleOrientationChange);}function setupUserInteractionDetection(){const _0x27ae74=_0x2ad86e,_0x3fa548=['click','touchstart',_0x27ae74(0xe2)],_0x39da74=()=>{const _0x384eb0=_0x27ae74;!hasUserInteracted&&(hasUserInteracted=!![],console[_0x384eb0(0xd9)](_0x384eb0(0xfb)),pendingMusicAction&&(pendingMusicAction(),pendingMusicAction=null),_0x3fa548['forEach'](_0x2c8578=>{const _0x178fb8=_0x384eb0;document[_0x178fb8(0x141)](_0x2c8578,_0x39da74);}));};_0x3fa548['forEach'](_0x5ced21=>{const _0xa82f49=_0x27ae74;document[_0xa82f49(0xf2)](_0x5ced21,_0x39da74,{'once':!![]});});}function setupUserInteractionDetection(){const _0x44fc58=_0x2ad86e,_0x2ce94f=['click',_0x44fc58(0x140),_0x44fc58(0xe2)],_0x1b33ba=()=>{const _0x102e90=_0x44fc58;!hasUserInteracted&&(hasUserInteracted=!![],console[_0x102e90(0xd9)]('User\x20interaction\x20detected\x20-\x20audio\x20enabled'),pendingMusicAction&&(pendingMusicAction(),pendingMusicAction=null),_0x2ce94f[_0x102e90(0x11b)](_0xa89afa=>{const _0xfb657a=_0x102e90;document[_0xfb657a(0x141)](_0xa89afa,_0x1b33ba);}));};_0x2ce94f['forEach'](_0x44db83=>{const _0x4e3cf9=_0x44fc58;document[_0x4e3cf9(0xf2)](_0x44db83,_0x1b33ba,{'once':!![]});});}function resizeCanvas(){const _0x1e7b8c=_0x2ad86e,_0x5a9ec5=document[_0x1e7b8c(0x94)](_0x1e7b8c(0x134));canvas[_0x1e7b8c(0x159)]=_0x5a9ec5[_0x1e7b8c(0x112)],canvas[_0x1e7b8c(0xec)]=_0x5a9ec5[_0x1e7b8c(0x9b)],(gameRunning||gamePaused)&&(dino['x']=canvas[_0x1e7b8c(0x159)]*0.2,dino[_0x1e7b8c(0xf8)]&&(dino['y']=canvas[_0x1e7b8c(0xec)]-GROUND_HEIGHT-dino[_0x1e7b8c(0xec)])),updateGameSpeed();}function setupAuthUI(){const _0x394eb1=_0x2ad86e;if(ui[_0x394eb1(0xbf)])ui[_0x394eb1(0xbf)][_0x394eb1(0xf2)](_0x394eb1(0x108),()=>switchAuthMode(![]));if(ui['tabRegister'])ui['tabRegister'][_0x394eb1(0xf2)]('click',()=>switchAuthMode(!![]));if(ui[_0x394eb1(0x155)])ui['authActionBtn'][_0x394eb1(0xf2)](_0x394eb1(0x108),handleAuthAction);}function setupMenuUI(){const _0x2f97ec=_0x2ad86e;if(ui['menuPlayBtn'])ui[_0x2f97ec(0x10b)]['addEventListener']('click',startGame);if(ui[_0x2f97ec(0x143)])ui[_0x2f97ec(0x143)][_0x2f97ec(0xf2)]('click',showLeaderboard);if(ui['menuSettingsBtn'])ui[_0x2f97ec(0x13f)][_0x2f97ec(0xf2)](_0x2f97ec(0x108),showSettings);if(ui[_0x2f97ec(0x123)])ui[_0x2f97ec(0x123)][_0x2f97ec(0xf2)](_0x2f97ec(0x108),showAbout);if(ui[_0x2f97ec(0x15b)])ui[_0x2f97ec(0x15b)]['addEventListener'](_0x2f97ec(0x108),showMainMenu);if(ui[_0x2f97ec(0xed)])ui[_0x2f97ec(0xed)]['addEventListener'](_0x2f97ec(0x108),showMainMenu);if(ui[_0x2f97ec(0xb7)])ui[_0x2f97ec(0xb7)][_0x2f97ec(0xf2)](_0x2f97ec(0x108),showMainMenu);if(ui['logoutBtn'])ui[_0x2f97ec(0x11e)][_0x2f97ec(0xf2)](_0x2f97ec(0x108),logout);}function switchAuthMode(_0x51d101){const _0x6f5baa=_0x2ad86e;isRegisterMode=_0x51d101,_0x51d101?(ui[_0x6f5baa(0xc2)][_0x6f5baa(0xb9)][_0x6f5baa(0xaa)](_0x6f5baa(0xe4)),ui[_0x6f5baa(0xbf)][_0x6f5baa(0xb9)][_0x6f5baa(0x10f)](_0x6f5baa(0xe4)),ui[_0x6f5baa(0x89)][_0x6f5baa(0xb9)][_0x6f5baa(0x10f)](_0x6f5baa(0x117)),ui[_0x6f5baa(0x155)][_0x6f5baa(0x119)]=_0x6f5baa(0xfa)):(ui[_0x6f5baa(0xbf)][_0x6f5baa(0xb9)][_0x6f5baa(0xaa)](_0x6f5baa(0xe4)),ui[_0x6f5baa(0xc2)][_0x6f5baa(0xb9)][_0x6f5baa(0x10f)](_0x6f5baa(0xe4)),ui[_0x6f5baa(0x89)][_0x6f5baa(0xb9)][_0x6f5baa(0xaa)](_0x6f5baa(0x117)),ui['authActionBtn'][_0x6f5baa(0x119)]='Login\x20&\x20Play'),ui['authMessage'][_0x6f5baa(0x119)]='';}async function handleAuthAction(){const _0x2c1ed9=_0x2ad86e,_0x1e7dd6=ui[_0x2c1ed9(0x105)][_0x2c1ed9(0x9a)][_0x2c1ed9(0x138)](),_0x3648a2=ui[_0x2c1ed9(0x89)][_0x2c1ed9(0x9a)][_0x2c1ed9(0x138)]();if(!_0x1e7dd6){ui['authMessage'][_0x2c1ed9(0x119)]=_0x2c1ed9(0xae),ui['authMessage'][_0x2c1ed9(0x8b)][_0x2c1ed9(0x93)]=_0x2c1ed9(0xaf);return;}ui[_0x2c1ed9(0x155)][_0x2c1ed9(0x10e)]=!![],ui['authActionBtn'][_0x2c1ed9(0x119)]=_0x2c1ed9(0xfe);try{if(isRegisterMode){if(!_0x3648a2)throw new Error(_0x2c1ed9(0x106));await registerUser(_0x1e7dd6,_0x3648a2);}else await loginUser(_0x1e7dd6);localStorage[_0x2c1ed9(0xc3)]('ruralRunner_user',JSON[_0x2c1ed9(0x153)](currentUser)),showMainMenu();}catch(_0x313ab5){ui[_0x2c1ed9(0x14f)][_0x2c1ed9(0x119)]=_0x313ab5[_0x2c1ed9(0x15f)],ui[_0x2c1ed9(0x14f)][_0x2c1ed9(0x8b)][_0x2c1ed9(0x93)]=_0x2c1ed9(0xaf),ui[_0x2c1ed9(0x155)]['disabled']=![],ui[_0x2c1ed9(0x155)][_0x2c1ed9(0x119)]=isRegisterMode?_0x2c1ed9(0xfa):_0x2c1ed9(0xf9);}}async function registerUser(_0x44410c,_0x2d5eb2){const _0x210240=_0x2ad86e,_0x13e4e4=db[_0x210240(0x103)](_0x210240(0x100))['doc'](_0x44410c),_0x1590a3=await _0x13e4e4[_0x210240(0x114)]();if(_0x1590a3[_0x210240(0x13e)])throw new Error('User\x20ID\x20already\x20exists.\x20Please\x20login.');const _0x4f94a3=await db[_0x210240(0x103)]('users')[_0x210240(0xcc)](_0x210240(0x8c),'==',_0x2d5eb2)[_0x210240(0x114)]();if(!_0x4f94a3[_0x210240(0x113)])throw new Error(_0x210240(0xad));const _0x4d1f81={'name':_0x2d5eb2,'highScore':0x0,'createdAt':firebase[_0x210240(0xa9)]['FieldValue'][_0x210240(0x12a)](),'lastUpdated':firebase[_0x210240(0xa9)][_0x210240(0x133)][_0x210240(0x12a)]()};await _0x13e4e4['set'](_0x4d1f81),currentUser={'id':_0x44410c,..._0x4d1f81},console['log'](_0x210240(0xa8));}async function loginUser(_0x549ff9){const _0x3c7386=_0x2ad86e,_0x54a5d4=db[_0x3c7386(0x103)](_0x3c7386(0x100))[_0x3c7386(0x135)](_0x549ff9),_0x43cf1a=await _0x54a5d4[_0x3c7386(0x114)]();if(!_0x43cf1a['exists'])throw new Error('User\x20ID\x20not\x20found.\x20Please\x20register.');const _0x18d9a0=_0x43cf1a['data']();typeof _0x18d9a0[_0x3c7386(0x132)]!=='number'&&(_0x18d9a0['highScore']=0x0,await _0x54a5d4[_0x3c7386(0xbb)]({'highScore':0x0}),console[_0x3c7386(0xd9)](_0x3c7386(0xf0),_0x549ff9)),currentUser={'id':_0x549ff9,..._0x18d9a0},console['log'](_0x3c7386(0x162),currentUser[_0x3c7386(0x8c)],'High\x20Score:',currentUser[_0x3c7386(0x132)]);}async function fetchLeaderboard(){const _0x81427d=_0x2ad86e;try{ui[_0x81427d(0x8e)][_0x81427d(0xef)]=_0x81427d(0x98),await new Promise(_0x5dea2d=>setTimeout(_0x5dea2d,0x64));const _0x43e813=await db[_0x81427d(0x103)](_0x81427d(0x100))[_0x81427d(0xc5)](_0x81427d(0x132),'desc')[_0x81427d(0xdd)](0x32)[_0x81427d(0x114)]();ui[_0x81427d(0x8e)][_0x81427d(0xef)]='';if(_0x43e813[_0x81427d(0x113)]){ui[_0x81427d(0x8e)][_0x81427d(0xef)]='<li>No\x20scores\x20yet!</li>';return;}let _0x19be07=0x1;_0x43e813[_0x81427d(0x11b)](_0x34d56f=>{const _0x5d5fa3=_0x81427d,_0x47b43d=_0x34d56f['data'](),_0x56171d=document[_0x5d5fa3(0x11a)]('li');_0x56171d[_0x5d5fa3(0xef)]=_0x5d5fa3(0xa3)+_0x19be07+'.\x20'+_0x47b43d['name']+'\x20<small>('+_0x34d56f['id']+_0x5d5fa3(0xca)+(_0x47b43d[_0x5d5fa3(0x132)]||0x0)+_0x5d5fa3(0xf1),ui['topScoresList'][_0x5d5fa3(0xd6)](_0x56171d),_0x19be07++;});}catch(_0x49a0a1){console[_0x81427d(0x127)](_0x81427d(0xc0),_0x49a0a1),ui[_0x81427d(0x8e)][_0x81427d(0xef)]=_0x81427d(0x131);}}function showMainMenu(){const _0x356b04=_0x2ad86e;gameRunning=![];if(currentUser)ui[_0x356b04(0xda)][_0x356b04(0x119)]=currentUser[_0x356b04(0x8c)];hideAllOverlays(),ui['mainMenu']['classList']['remove']('hidden'),ui['authActionBtn'][_0x356b04(0x10e)]=![],ui[_0x356b04(0x155)][_0x356b04(0x119)]=isRegisterMode?_0x356b04(0xfa):_0x356b04(0xf9),playMenuMusic();}function showLeaderboard(){const _0x51683a=_0x2ad86e;hideAllOverlays(),ui['leaderboard']['classList']['remove'](_0x51683a(0x117)),fetchLeaderboard();}function showSettings(){const _0x290f61=_0x2ad86e;hideAllOverlays(),ui[_0x290f61(0xc6)][_0x290f61(0xb9)]['remove'](_0x290f61(0x117));}function showAbout(){const _0x5f1f42=_0x2ad86e;hideAllOverlays(),ui[_0x5f1f42(0x92)][_0x5f1f42(0xb9)][_0x5f1f42(0x10f)](_0x5f1f42(0x117));}function hideAllOverlays(){const _0x15516e=_0x2ad86e;ui['login']['classList'][_0x15516e(0xaa)](_0x15516e(0x117)),ui[_0x15516e(0x11d)][_0x15516e(0xb9)][_0x15516e(0xaa)]('hidden'),ui['leaderboard']['classList'][_0x15516e(0xaa)](_0x15516e(0x117)),ui[_0x15516e(0xc6)][_0x15516e(0xb9)]['add'](_0x15516e(0x117));if(ui[_0x15516e(0x92)])ui[_0x15516e(0x92)][_0x15516e(0xb9)][_0x15516e(0xaa)](_0x15516e(0x117));ui[_0x15516e(0xe8)][_0x15516e(0xb9)][_0x15516e(0xaa)](_0x15516e(0x117)),ui[_0x15516e(0xe0)]['classList'][_0x15516e(0xaa)](_0x15516e(0x117));if(ui[_0x15516e(0x86)])ui['pauseBtn'][_0x15516e(0xb9)][_0x15516e(0xaa)](_0x15516e(0x117));if(ui[_0x15516e(0x157)])ui[_0x15516e(0x157)][_0x15516e(0xb9)][_0x15516e(0xaa)](_0x15516e(0x117));}function logout(){const _0x4ee094=_0x2ad86e;localStorage[_0x4ee094(0xe3)]('ruralRunner_user'),currentUser=null,hideAllOverlays(),ui[_0x4ee094(0x9e)][_0x4ee094(0xb9)][_0x4ee094(0x10f)](_0x4ee094(0x117)),stopMusic();}function goToMainMenuFromPause(){gameRunning=![],gamePaused=![],isCountingDown=![],stopMusic(),showMainMenu();}function togglePause(){if(!gameRunning)return;!gamePaused?pauseGame():resumeGameWithCountdown();}function pauseGame(){const _0x87a361=_0x2ad86e;gamePaused=!![],pausedTime=performance[_0x87a361(0xd3)](),ui['pauseOverlay']['classList'][_0x87a361(0x10f)](_0x87a361(0x117)),ui[_0x87a361(0x12e)]['style'][_0x87a361(0x124)]=_0x87a361(0x81),ui[_0x87a361(0x86)][_0x87a361(0x119)]='▶',ui['pauseBtn'][_0x87a361(0xc9)]=_0x87a361(0xab),!bgMusic[_0x87a361(0x80)]&&bgMusic[_0x87a361(0xf7)]();}function resumeGameWithCountdown(){const _0x101a32=_0x2ad86e;if(gamePaused&&!isCountingDown){isCountingDown=!![],countdownValue=0x3,ui[_0x101a32(0x12e)]['textContent']='3',ui[_0x101a32(0x12e)]['style'][_0x101a32(0x124)]=_0x101a32(0x11f);const _0x46b397=setInterval(()=>{const _0x12cfce=_0x101a32;countdownValue--;if(countdownValue>0x0)ui[_0x12cfce(0x12e)][_0x12cfce(0x119)]=countdownValue['toString']();else countdownValue===0x0?ui[_0x12cfce(0x12e)][_0x12cfce(0x119)]=_0x12cfce(0xb1):(clearInterval(_0x46b397),ui[_0x12cfce(0x157)][_0x12cfce(0xb9)]['add'](_0x12cfce(0x117)),ui[_0x12cfce(0x12e)][_0x12cfce(0x8b)][_0x12cfce(0x124)]=_0x12cfce(0x81),ui[_0x12cfce(0x86)][_0x12cfce(0x119)]='⏸',ui['pauseBtn'][_0x12cfce(0xc9)]=_0x12cfce(0x12c),gamePaused=![],isCountingDown=![],lastTime=0x0,deltaTime=0x0,ui[_0x12cfce(0x149)][_0x12cfce(0x146)]&&bgMusic[_0x12cfce(0x80)]&&bgMusic['play']()[_0x12cfce(0x15a)](_0x4b90e7=>console[_0x12cfce(0xd9)](_0x12cfce(0xb3),_0x4b90e7)));},0x3e8);}}function playMenuMusic(){const _0x14e22f=_0x2ad86e;if(!ui[_0x14e22f(0x149)][_0x14e22f(0x146)]||isLoadingMusic)return;const _0x165238=()=>{const _0x4498ca=_0x14e22f;if(currentMusicSrc!==menuTheme)isLoadingMusic=!![],bgMusic[_0x4498ca(0xf7)](),bgMusic[_0x4498ca(0x8f)]=menuTheme,currentMusicSrc=menuTheme,bgMusic[_0x4498ca(0x110)]=!![],bgMusic[_0x4498ca(0xf2)]('canplaythrough',function _0x2b3c3d(){const _0xd27494=_0x4498ca;bgMusic[_0xd27494(0x141)](_0xd27494(0xe1),_0x2b3c3d),isLoadingMusic=![],ui['musicToggle'][_0xd27494(0x146)]&&hasUserInteracted&&bgMusic[_0xd27494(0x91)]()[_0xd27494(0x15a)](_0x19a743=>console['log'](_0xd27494(0xce),_0x19a743));},{'once':!![]}),bgMusic[_0x4498ca(0x14b)]();else bgMusic[_0x4498ca(0x80)]&&!isLoadingMusic&&hasUserInteracted&&bgMusic['play']()['catch'](_0x4f644c=>console[_0x4498ca(0xd9)]('Menu\x20music\x20resume\x20failed:',_0x4f644c));};hasUserInteracted?_0x165238():(pendingMusicAction=_0x165238,console[_0x14e22f(0xd9)](_0x14e22f(0x145)));}function playGameMusic(){const _0x4f37c4=_0x2ad86e;if(!ui[_0x4f37c4(0x149)][_0x4f37c4(0x146)]||isLoadingMusic){console['log']('Music\x20is\x20disabled\x20in\x20settings');return;}const _0x1adbb2=musicTracks[Math['floor'](Math['random']()*musicTracks[_0x4f37c4(0xa6)])];if(currentMusicSrc===_0x1adbb2&&!bgMusic[_0x4f37c4(0x80)])return;const _0x2a3fbb=()=>{const _0x28e233=_0x4f37c4;isLoadingMusic=!![],console[_0x28e233(0xd9)](_0x28e233(0xac),_0x1adbb2),bgMusic[_0x28e233(0xf7)](),bgMusic[_0x28e233(0x8f)]=_0x1adbb2,currentMusicSrc=_0x1adbb2,bgMusic['loop']=!![],bgMusic['addEventListener']('canplaythrough',function _0x15c28a(){const _0x2aa88c=_0x28e233;bgMusic['removeEventListener'](_0x2aa88c(0xe1),_0x15c28a),isLoadingMusic=![],ui[_0x2aa88c(0x149)][_0x2aa88c(0x146)]&&gameRunning&&!gamePaused&&hasUserInteracted&&bgMusic[_0x2aa88c(0x91)]()['catch'](_0xf5b9a0=>console['log']('Game\x20music\x20play\x20failed:',_0xf5b9a0));},{'once':!![]}),bgMusic['load']();};hasUserInteracted?_0x2a3fbb():(pendingMusicAction=_0x2a3fbb,console[_0x4f37c4(0xd9)]('Game\x20music\x20queued\x20-\x20waiting\x20for\x20user\x20interaction'));}function changeGameMusic(_0x127084){const _0x1637f3=_0x2ad86e;if(!ui['musicToggle'][_0x1637f3(0x146)]||isLoadingMusic||!hasUserInteracted){console[_0x1637f3(0xd9)](_0x1637f3(0x9f));return;}const _0x2d87ae=Math['floor'](Math[_0x1637f3(0x15d)]()*musicTracks[_0x1637f3(0xa6)]),_0x8358b5=musicTracks[_0x2d87ae];if(currentMusicSrc===_0x8358b5)return;isLoadingMusic=!![],console['log'](_0x1637f3(0x154)+Math['floor'](score)+_0x1637f3(0x90)+(_0x2d87ae+0x1)+':\x20'+_0x8358b5),bgMusic[_0x1637f3(0xf7)](),bgMusic[_0x1637f3(0x8f)]=_0x8358b5,currentMusicSrc=_0x8358b5,bgMusic[_0x1637f3(0x110)]=!![],bgMusic[_0x1637f3(0xf2)](_0x1637f3(0xe1),function _0x3187a4(){const _0xf4ebfe=_0x1637f3;bgMusic[_0xf4ebfe(0x141)](_0xf4ebfe(0xe1),_0x3187a4),isLoadingMusic=![],ui[_0xf4ebfe(0x149)][_0xf4ebfe(0x146)]&&gameRunning&&!gamePaused&&hasUserInteracted&&bgMusic[_0xf4ebfe(0x91)]()[_0xf4ebfe(0x15a)](_0x8b842e=>console[_0xf4ebfe(0xd9)](_0xf4ebfe(0xeb),_0x8b842e));},{'once':!![]}),bgMusic[_0x1637f3(0x14b)]();}function stopMusic(){const _0x1e3df3=_0x2ad86e;isLoadingMusic=![],bgMusic[_0x1e3df3(0xf7)](),bgMusic[_0x1e3df3(0x14e)]=0x0;}function updateMusicState(){const _0x5684e7=_0x2ad86e,_0x1120b8=ui['musicToggle'][_0x5684e7(0x146)];localStorage[_0x5684e7(0xc3)](_0x5684e7(0x128),_0x1120b8);if(_0x1120b8){if(!gameRunning&&!ui[_0x5684e7(0x11d)][_0x5684e7(0xb9)][_0x5684e7(0xb0)](_0x5684e7(0x117)))playMenuMusic();else{if(gameRunning&&!isLoadingMusic&&hasUserInteracted){if(bgMusic[_0x5684e7(0x80)])bgMusic[_0x5684e7(0x91)]()[_0x5684e7(0x15a)](_0x296c1e=>console['log'](_0x5684e7(0xb3),_0x296c1e));}}}else bgMusic[_0x5684e7(0xf7)](),isLoadingMusic=![],pendingMusicAction=null;}function startGame(){const _0x1964f2=_0x2ad86e;hideAllOverlays(),ui[_0x1964f2(0xe0)][_0x1964f2(0xb9)][_0x1964f2(0x10f)](_0x1964f2(0x117)),ui[_0x1964f2(0x86)][_0x1964f2(0xb9)][_0x1964f2(0x10f)](_0x1964f2(0x117)),playGameMusic(),resetGame();}function resetGame(){const _0x2ddbef=_0x2ad86e;gameRunning=!![],gamePaused=![],isCountingDown=![],score=0x0,updateGameSpeed(),obstacles=[],frameCount=0x0,currentMusicIndex=0x0,lastScoreMilestone=0x0,lastTime=0x0,deltaTime=0x0,dino['x']=canvas['width']*0.2,dino['y']=canvas['height']-GROUND_HEIGHT-dino[_0x2ddbef(0xec)],dino['dy']=0x0,ui[_0x2ddbef(0xe8)][_0x2ddbef(0xb9)][_0x2ddbef(0xaa)](_0x2ddbef(0x117)),ui['scoreBoard']['classList'][_0x2ddbef(0x10f)](_0x2ddbef(0x117)),ui[_0x2ddbef(0x86)][_0x2ddbef(0xb9)][_0x2ddbef(0x10f)](_0x2ddbef(0x117)),ui[_0x2ddbef(0x86)][_0x2ddbef(0x119)]='⏸',ui[_0x2ddbef(0x86)]['title']='Pause\x20Game',currentUser?ui[_0x2ddbef(0x132)][_0x2ddbef(0x119)]=currentUser[_0x2ddbef(0x132)]:ui[_0x2ddbef(0x132)][_0x2ddbef(0x119)]='0',playGameMusic(),requestAnimationFrame(gameLoop);}function spawnObstacle(){const _0x423e90=_0x2ad86e,_0x455849=0x64,_0x276765={'x':canvas['width'],'y':canvas[_0x423e90(0xec)]-GROUND_HEIGHT-_0x455849,'width':0x1e,'height':_0x455849,'draw'(){const _0x34149c=_0x423e90;assets[_0x34149c(0x8a)][_0x34149c(0x11c)]&&assets[_0x34149c(0x8a)][_0x34149c(0x120)]!==0x0?ctx['drawImage'](assets[_0x34149c(0x8a)],this['x']-0xa,this['y'],0x78,0x78):(ctx[_0x34149c(0x83)]=_0x34149c(0x85),ctx['fillRect'](this['x'],this['y'],this[_0x34149c(0x159)],this[_0x34149c(0xec)]));}};obstacles[_0x423e90(0xa7)](_0x276765);}function update(_0x3e8724){const _0x1bbf41=_0x2ad86e;if(!gameRunning)return;frameCount++,score+=0xa*_0x3e8724,gameSpeed+=0x8*_0x3e8724,ui[_0x1bbf41(0x99)]['textContent']=Math['floor'](score);const _0x23015e=Math[_0x1bbf41(0xc4)](score/0x190);_0x23015e>lastScoreMilestone&&_0x23015e>0x0&&!isLoadingMusic&&(lastScoreMilestone=_0x23015e,changeGameMusic(_0x23015e));dino[_0x1bbf41(0xbb)](_0x3e8724),bgOffset-=gameSpeed*0.5*_0x3e8724;if(bgOffset<=-canvas[_0x1bbf41(0x159)])bgOffset=0x0;let _0x1ebed0=gameSpeed*1.8,_0x442e4e=_0x1ebed0+0x1f4;if(obstacles[_0x1bbf41(0xa6)]===0x0)spawnObstacle();else{const _0x568ef6=obstacles[obstacles['length']-0x1],_0x431c0e=canvas['width']-_0x568ef6['x'];_0x431c0e>_0x1ebed0&&((Math['random']()<0.02*_0x3e8724*0x3c||_0x431c0e>_0x442e4e)&&spawnObstacle());}for(let _0x541596=obstacles['length']-0x1;_0x541596>=0x0;_0x541596--){let _0x5f5ba5=obstacles[_0x541596];_0x5f5ba5['x']-=gameSpeed*_0x3e8724,dino['x']<_0x5f5ba5['x']+_0x5f5ba5['width']&&dino['x']+dino[_0x1bbf41(0x159)]>_0x5f5ba5['x']&&dino['y']<_0x5f5ba5['y']+_0x5f5ba5['height']&&dino['y']+dino['height']>_0x5f5ba5['y']&&gameOver(),_0x5f5ba5['x']+_0x5f5ba5[_0x1bbf41(0x159)]<0x0&&obstacles[_0x1bbf41(0xa2)](_0x541596,0x1);}}function draw(){const _0xa77903=_0x2ad86e;ctx[_0xa77903(0x126)](0x0,0x0,canvas[_0xa77903(0x159)],canvas[_0xa77903(0xec)]),assets[_0xa77903(0xf5)][_0xa77903(0x11c)]&&assets[_0xa77903(0xf5)][_0xa77903(0x120)]!==0x0?(ctx[_0xa77903(0x121)](assets['background'],bgOffset,0x0,canvas['width'],canvas['height']),ctx[_0xa77903(0x121)](assets[_0xa77903(0xf5)],bgOffset+canvas[_0xa77903(0x159)],0x0,canvas['width'],canvas[_0xa77903(0xec)])):(ctx[_0xa77903(0x83)]=_0xa77903(0x14d),ctx[_0xa77903(0x15e)](0x0,canvas['height']-GROUND_HEIGHT,canvas[_0xa77903(0x159)],GROUND_HEIGHT),ctx[_0xa77903(0x83)]=_0xa77903(0x104),ctx[_0xa77903(0x15e)](0x0,0x0,canvas[_0xa77903(0x159)],canvas[_0xa77903(0xec)]-GROUND_HEIGHT)),obstacles['forEach'](_0x5a47fe=>_0x5a47fe[_0xa77903(0x115)]()),dino['draw']();}function gameLoop(_0x29277e){const _0x53f0bd=_0x2ad86e;if(!gameRunning)return;if(gamePaused||isCountingDown){requestAnimationFrame(gameLoop);return;}lastTime===0x0&&(lastTime=_0x29277e),deltaTime=(_0x29277e-lastTime)/0x3e8,lastTime=_0x29277e,deltaTime=Math[_0x53f0bd(0xe6)](deltaTime,0x1/0x1e),update(deltaTime),draw(),requestAnimationFrame(gameLoop);}async function gameOver(){const _0x5d7752=_0x2ad86e;gameRunning=![],gamePaused=![],isCountingDown=![],stopMusic();const _0x584230=Math[_0x5d7752(0xc4)](score);ui[_0x5d7752(0x118)][_0x5d7752(0x119)]=_0x584230,ui[_0x5d7752(0xe8)][_0x5d7752(0xb9)][_0x5d7752(0x10f)]('hidden'),ui[_0x5d7752(0xe0)][_0x5d7752(0xb9)][_0x5d7752(0xaa)](_0x5d7752(0x117)),ui[_0x5d7752(0x86)][_0x5d7752(0xb9)]['add'](_0x5d7752(0x117));if(currentUser&&_0x584230>currentUser[_0x5d7752(0x132)]){currentUser[_0x5d7752(0x132)]=_0x584230,localStorage[_0x5d7752(0xc3)](_0x5d7752(0xd1),JSON[_0x5d7752(0x153)](currentUser));try{await db[_0x5d7752(0x103)](_0x5d7752(0x100))[_0x5d7752(0x135)](currentUser['id'])['update']({'highScore':_0x584230}),console[_0x5d7752(0xd9)](_0x5d7752(0x109));}catch(_0x1b383c){console[_0x5d7752(0x127)]('Error\x20saving\x20score\x20to\x20leaderboard:',_0x1b383c);}}}function _0x57bd(_0x59ada9,_0x494920){_0x59ada9=_0x59ada9-0x80;const _0x4c120f=_0x4c12();let _0x57bd9b=_0x4c120f[_0x59ada9];return _0x57bd9b;}function enterFullscreen(){const _0x18e8cf=_0x2ad86e,_0x3e704c=document[_0x18e8cf(0x84)];if(_0x3e704c['requestFullscreen'])_0x3e704c[_0x18e8cf(0xba)]()['catch'](_0x1e3284=>{console['log']('Fullscreen\x20request\x20failed:',_0x1e3284);});else{if(_0x3e704c[_0x18e8cf(0xa1)])_0x3e704c[_0x18e8cf(0xa1)]();else{if(_0x3e704c['mozRequestFullScreen'])_0x3e704c[_0x18e8cf(0x10c)]();else _0x3e704c[_0x18e8cf(0xdb)]&&_0x3e704c[_0x18e8cf(0xdb)]();}}}function exitFullscreen(){const _0x4b6762=_0x2ad86e;if(document[_0x4b6762(0x13b)])document[_0x4b6762(0x13b)]();else{if(document['webkitExitFullscreen'])document[_0x4b6762(0x111)]();else{if(document[_0x4b6762(0xa4)])document[_0x4b6762(0xa4)]();else document[_0x4b6762(0xb4)]&&document['msExitFullscreen']();}}}function isMobileDevice(){const _0x5c9cbf=_0x2ad86e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i['test'](navigator[_0x5c9cbf(0x88)]);}function isLandscape(){const _0x20892c=_0x2ad86e;return window[_0x20892c(0x12b)]>window[_0x20892c(0x130)];}function handleOrientationChange(){const _0x46f6e0=_0x2ad86e;isMobileDevice()&&isLandscape()&&!document[_0x46f6e0(0x9d)]&&!document['webkitFullscreenElement']&&setTimeout(()=>{isLandscape()&&enterFullscreen();},0x12c);}init();